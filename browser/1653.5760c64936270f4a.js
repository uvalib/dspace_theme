"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[1653,7450],{12236:(U,P,a)=>{a.d(P,{u:()=>R});var d=a(54438),T=a(7673),m=a(90839),A=a(41780);let E=(()=>{class F{constructor(I){this.translationService=I,this.QUALITY_ASSURANCE_BREADCRUMB_KEY="admin.quality-assurance.breadcrumbs"}getBreadcrumbs(I,M){const j=I.split(":"),C=j[0],i=j.length>2?j[j.length-1]:j[1];return(0,T.of)(i?[new m.Q(this.translationService.instant(this.QUALITY_ASSURANCE_BREADCRUMB_KEY),M),new m.Q(C,`${M}${C}`),new m.Q(i,void 0)]:[new m.Q(this.translationService.instant(this.QUALITY_ASSURANCE_BREADCRUMB_KEY),M),new m.Q(C,`${M}${C}`)])}static{this.\u0275fac=function(M){return new(M||F)(d.KVO(A.c$))}}static{this.\u0275prov=d.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}}return F})();const R=(F,O,I=(0,d.WQX)(E))=>{const M=F.paramMap.get("sourceId"),j=F.paramMap.get("topicId");let C=M;j&&(C+=`:${j}`);const i=O.url;return{provider:I,key:C,url:i.substring(0,i.indexOf(M))}}},27450:(U,P,a)=>{a.r(P),a.d(P,{QualityAssuranceEventDataService:()=>B});var d=a(21626),T=a(47677),m=a(96697),A=a(25558),E=a(82777),R=a(39806),F=a(72734),O=a(53954),I=a(41684),M=a(39280),j=a(13617),C=a(63897),i=a(87158),o=a(35108),N=a(37419),Q=a(43052),Y=a(32473),L=a(4910),n=a(54438);let B=(()=>{class G extends C.W{constructor(b,y,u,p,l,g){super("qualityassuranceevents",b,y,u,p),this.requestService=b,this.rdbService=y,this.objectCache=u,this.halService=p,this.notificationsService=l,this.comparator=g,this.createData=new M.V(this.linkPath,b,y,u,p,l,this.responseMsToLive),this.deleteData=new j.I(this.linkPath,b,y,u,p,l,this.responseMsToLive,this.constructIdEndpoint),this.patchData=new i.n(this.linkPath,b,y,u,p,g,this.responseMsToLive,this.constructIdEndpoint),this.searchData=new o.X(this.linkPath,b,y,u,p,this.responseMsToLive)}getEventsByTopic(b,y={},...u){return y.searchParams=[new O.x("topic",b)],this.searchData.searchBy("findByTopic",y,!0,!0,...u)}searchEventsByTopic(b={},...y){return this.searchData.searchBy("findByTopic",b,!0,!0,...y)}clearFindByTopicRequests(){this.requestService.setStaleByHrefSubstring("findByTopic")}getEvent(b,...y){return this.findById(b,!0,!0,...y)}patchEvent(b,y,u){return this.patchData.patch(y,[{path:"/status",op:"replace",value:b}])}boundProject(b,y){return this.postOnRelated(b,y)}removeProject(b){return this.deleteOnRelated(b)}deleteOnRelated(b){const y=this.requestService.generateRequestId();return this.getIDHrefObs(b).pipe((0,T.I)(p=>(0,E.a4)(p))).subscribe(p=>{const l=new Q.Dk(y,p+"/related",b);(0,E.a4)(this.responseMsToLive)&&(l.responseMsToLive=this.responseMsToLive),this.requestService.send(l)}),this.rdbService.buildFromRequestUUID(y)}postOnRelated(b,y,u){const p=this.requestService.generateRequestId();return this.getIDHrefObs(b).pipe((0,m.s)(1)).subscribe(g=>{const f=new Q.Qf(p,g+"/related?item="+y,u);(0,E.a4)(this.responseMsToLive)&&(f.responseMsToLive=this.responseMsToLive),this.requestService.send(f)}),this.rdbService.buildFromRequestUUID(p)}postData(b,y,u,p){const l=this.requestService.generateRequestId();return this.getBrowseEndpoint().pipe((0,A.n)(f=>{const x=Object.create({});let X=new d.Lr;X=X.append("Content-Type","application/json"),x.headers=X;let V=new d.Nl;V=V.append("target",b).append("correctionType",y),x.params=V;const W=new Q.Qf(l,f,{reason:p},x);return(0,E.a4)(this.responseMsToLive)&&(W.responseMsToLive=this.responseMsToLive),this.requestService.send(W),this.rdbService.buildFromRequestUUID(l)}))}deleteQAEvent(b){return this.deleteData.delete(b.id)}static{this.\u0275fac=function(y){return new(y||G)(n.KVO(Y.B),n.KVO(F.o),n.KVO(I.$),n.KVO(L.Y),n.KVO(R.I),n.KVO(N.Y))}}static{this.\u0275prov=n.jDH({token:G,factory:G.\u0275fac,providedIn:"root"})}}return G})()},61956:(U,P,a)=>{a.d(P,{p:()=>u});var d=a(25499),T=a(96354),m=a(74566),A=a(79984),E=a(82777);function F(p,l){return(0,d.Mz)(p,g=>{if((0,E.a4)(g)&&(0,E.a4)(g[l]))return g[l]})}var O=a(38571);const I=(0,d.UX)("suggestionNotifications");const C=(0,d.Mz)(I,p=>p.qaTopic.loaded),i=(0,d.Mz)(I,p=>p.qaTopic.processing),o=(0,d.Mz)(I,p=>p.qaTopic.totalPages),N=(0,d.Mz)(I,p=>p.qaTopic.currentPage),Q=(0,d.Mz)(I,p=>p.qaTopic.totalElements);const n=(0,d.Mz)(I,p=>p.qaSource.loaded),B=(0,d.Mz)(I,p=>p.qaSource.processing),G=(0,d.Mz)(I,p=>p.qaSource.totalPages),J=(0,d.Mz)(I,p=>p.qaSource.currentPage),b=(0,d.Mz)(I,p=>p.qaSource.totalElements);var y=a(54438);let u=(()=>{class p{constructor(g){this.store=g}getQualityAssuranceTopics(){return this.store.pipe((0,d.Lt)(function j(){return F(function M(){return F(O.I,"qaTopic")}(),"topics")}()))}isQualityAssuranceTopicsLoading(){return this.store.pipe((0,d.Lt)(C),(0,T.T)(g=>!g))}isQualityAssuranceTopicsLoaded(){return this.store.pipe((0,d.Lt)(C))}isQualityAssuranceTopicsProcessing(){return this.store.pipe((0,d.Lt)(i))}getQualityAssuranceTopicsTotalPages(){return this.store.pipe((0,d.Lt)(o))}getQualityAssuranceTopicsCurrentPage(){return this.store.pipe((0,d.Lt)(N))}getQualityAssuranceTopicsTotals(){return this.store.pipe((0,d.Lt)(Q))}dispatchRetrieveQualityAssuranceTopics(g,f,x,X){this.store.dispatch(new A._v(g,f,x,X))}getQualityAssuranceSource(){return this.store.pipe((0,d.Lt)(function L(){return F(function Y(){return F(O.I,"qaSource")}(),"source")}()))}isQualityAssuranceSourceLoading(){return this.store.pipe((0,d.Lt)(n),(0,T.T)(g=>!g))}isQualityAssuranceSourceLoaded(){return this.store.pipe((0,d.Lt)(n))}isQualityAssuranceSourceProcessing(){return this.store.pipe((0,d.Lt)(B))}getQualityAssuranceSourceTotalPages(){return this.store.pipe((0,d.Lt)(G))}getQualityAssuranceSourceCurrentPage(){return this.store.pipe((0,d.Lt)(J))}getQualityAssuranceSourceTotals(){return this.store.pipe((0,d.Lt)(b))}dispatchRetrieveQualityAssuranceSource(g,f){this.store.dispatch(new m.lZ(g,f))}static{this.\u0275fac=function(f){return new(f||p)(y.KVO(d.il))}}static{this.\u0275prov=y.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},29751:(U,P,a)=>{a.d(P,{a:()=>y});var d=a(60177),T=a(7901),m=a(41780),A=a(96697),E=a(23294),R=a(22978),F=a(82777),O=a(82394),I=a(5682),M=a(23401),j=a(24215),C=a(67977),i=a(31224),o=a(54438);const N=u=>["/entities/person/",u],Q=u=>({total:u});function Y(u,p){1&u&&(o.nrm(0,"ds-loading",6),o.nI1(1,"translate")),2&u&&o.FS9("message",o.bMT(1,1,"suggestion.loading"))}function L(u,p){1&u&&o.nrm(0,"ds-loading",10)}function n(u,p){1&u&&(o.j41(0,"div",13),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&u&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"suggestion.noTargets")," "))}function B(u,p){if(1&u){const l=o.RV6();o.j41(0,"tr",16)(1,"td")(2,"a",19),o.EFF(3),o.k0s()(),o.j41(4,"td")(5,"div",20)(6,"button",21),o.nI1(7,"translate"),o.bIt("click",function(){const f=o.eBV(l).$implicit,x=o.XpG(4);return o.Njj(x.redirectToSuggestions(f.id))}),o.j41(8,"span"),o.EFF(9),o.nI1(10,"translate"),o.k0s(),o.nrm(11,"i",22),o.k0s()()()()}if(2&u){const l=p.$implicit,g=o.XpG(4);o.R7$(2),o.Y8G("routerLink",o.eq3(10,N,g.getTargetUuid(l))),o.R7$(),o.JRh(l.display),o.R7$(3),o.FS9("title",o.i5U(7,4,"suggestion.button.review.title",o.eq3(12,Q,l.total.toString()))+l.display),o.R7$(3),o.SpI("",o.i5U(10,7,"suggestion.button.review",o.eq3(14,Q,l.total.toString()))," ")}}function G(u,p){if(1&u&&(o.j41(0,"div",14)(1,"table",15)(2,"thead")(3,"tr",16)(4,"th",17),o.EFF(5),o.nI1(6,"translate"),o.k0s(),o.j41(7,"th",17),o.EFF(8),o.nI1(9,"translate"),o.k0s()()(),o.j41(10,"tbody"),o.DNE(11,B,12,16,"tr",18),o.nI1(12,"async"),o.k0s()()()),2&u){const l=o.XpG(3);o.R7$(5),o.JRh(o.bMT(6,3,"suggestion.table.name")),o.R7$(3),o.JRh(o.bMT(9,5,"suggestion.table.actions")),o.R7$(3),o.Y8G("ngForOf",o.bMT(12,7,l.targets$))}}function J(u,p){if(1&u&&(o.qex(0),o.DNE(1,n,3,3,"div",11),o.nI1(2,"async"),o.DNE(3,G,13,9,"div",12),o.nI1(4,"async"),o.bVm()),2&u){let l,g;const f=o.XpG(2);o.R7$(),o.Y8G("ngIf",0===(null==(l=o.bMT(2,2,f.targets$))?null:l.length)),o.R7$(2),o.Y8G("ngIf",0!==(null==(g=o.bMT(4,4,f.targets$))?null:g.length))}}function b(u,p){if(1&u){const l=o.RV6();o.j41(0,"ds-pagination",7),o.nI1(1,"async"),o.bIt("paginationChange",function(){o.eBV(l);const f=o.XpG();return o.Njj(f.getSuggestionTargets())}),o.DNE(2,L,1,0,"ds-loading",8),o.nI1(3,"async"),o.DNE(4,J,5,6,"ng-container",9),o.nI1(5,"async"),o.k0s()}if(2&u){const l=o.XpG();o.Y8G("paginationOptions",l.paginationConfig)("collectionSize",o.bMT(1,6,l.totalElements$))("hideGear",!1)("retainScrollPosition",!1),o.R7$(2),o.Y8G("ngIf",o.bMT(3,8,l.isTargetsProcessing())),o.R7$(2),o.Y8G("ngIf",!0!==o.bMT(5,10,l.isTargetsProcessing()))}}let y=(()=>{class u{constructor(l,g,f,x){this.paginationService=l,this.suggestionTargetsStateService=g,this.suggestionService=f,this.router=x,this.source="",this.paginationConfig=Object.assign(new M.W,{id:"stp_"+this.source,pageSizeOptions:[5,10,20,40,60]}),this.subs=[]}ngOnInit(){this.targets$=this.suggestionTargetsStateService.getSuggestionTargets(this.source),this.totalElements$=this.suggestionTargetsStateService.getSuggestionTargetsTotals(this.source)}ngAfterViewInit(){this.subs.push(this.suggestionTargetsStateService.isSuggestionTargetsLoaded(this.source).pipe((0,A.s)(1)).subscribe(()=>{this.getSuggestionTargets()}))}isTargetsLoading(){return this.suggestionTargetsStateService.isSuggestionTargetsLoading(this.source)}isTargetsProcessing(){return this.suggestionTargetsStateService.isSuggestionTargetsProcessing(this.source)}redirectToSuggestions(l){this.router.navigate([(0,j.jV)(l)])}ngOnDestroy(){this.suggestionTargetsStateService.dispatchClearSuggestionTargetsAction(this.source),this.subs.filter(l=>(0,F.a4)(l)).forEach(l=>l.unsubscribe())}getSuggestionTargets(){this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,E.F)(),(0,A.s)(1)).subscribe(l=>{this.suggestionTargetsStateService.dispatchRetrieveSuggestionTargets(this.source,l.pageSize,l.currentPage)})}getTargetUuid(l){return this.suggestionService.getTargetUuid(l)}static{this.\u0275fac=function(g){return new(g||u)(o.rXU(R.m),o.rXU(i.x),o.rXU(C.F),o.rXU(T.Ix))}}static{this.\u0275cmp=o.VBU({type:u,selectors:[["ds-publication-claim"]],inputs:{source:"source"},standalone:!0,features:[o.aNF],decls:10,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","retainScrollPosition","paginationChange",4,"ngIf"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","retainScrollPosition"],["class","container","message","'suggestion.loading' | translate",4,"ngIf"],[4,"ngIf"],["message","'suggestion.loading' | translate",1,"container"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],[1,"text-center"],["scope","col"],["class","text-center",4,"ngFor","ngForOf"],["target","_blank",3,"routerLink"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"click","title"],[1,"fas","fa-lightbulb"]],template:function(g,f){1&g&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o.EFF(4),o.nI1(5,"translate"),o.k0s(),o.DNE(6,Y,2,3,"ds-loading",4),o.nI1(7,"async"),o.DNE(8,b,6,12,"ds-pagination",5),o.nI1(9,"async"),o.k0s()()()),2&g&&(o.R7$(4),o.JRh(o.bMT(5,3,"suggestion.title")),o.R7$(2),o.Y8G("ngIf",o.bMT(7,5,f.isTargetsLoading())),o.R7$(2),o.Y8G("ngIf",!0!==o.bMT(9,7,f.isTargetsLoading())))},dependencies:[O.v,d.Jj,m.h,m.D9,I.e,d.bT,d.pM,T.Wk]})}}return u})()},1647:(U,P,a)=>{a.d(P,{B:()=>T});var d=a(54438);let T=(()=>{class m{resolve(E,R){return{pageId:E.queryParams.pageId,pageSize:parseInt(E.queryParams.pageSize,10),currentPage:parseInt(E.queryParams.page,10)}}static{this.\u0275fac=function(R){return new(R||m)}}static{this.\u0275prov=d.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},93195:(U,P,a)=>{a.d(P,{k:()=>oe});var d=a(60177),T=a(7901),m=a(52149),A=a(41780),E=a(84412),R=a(7673),F=a(22806),O=a(84572),I=a(88141),M=a(96354),j=a(96697),C=a(25558),i=a(23294),o=a(73028),N=a(31943),Q=a(67018),Y=a(88280),L=a(6238),n=a(65007),B=a(3970),G=a(41023),J=a(29326),b=a(27450),y=a(22978),u=a(39552),p=a(80183),l=a(90887),g=a(16292),f=a(60456),x=a(82777),X=a(82394),V=a(39806),W=a(5682),h=a(23401),k=a(67600),t=a(54438),$=a(89417),D=a(26292),H=a(78655),w=a(7581),nt=a(13329),Z=a(33550),st=a(14131);const it=s=>({repeatable:!1,listId:s});function at(s,_){if(1&s&&(t.j41(0,"div")(1,"small"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",5)(5,"div",6)(6,"a",7),t.EFF(7),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,3,e.labelPrefix+e.label+".bountToLocal")),t.R7$(4),t.Y8G("routerLink","/items/{{externalSourceEntry.projectId}}"),t.R7$(),t.SpI(" ",e.externalSourceEntry.projectTitle," ")}}function ot(s,_){1&s&&(t.nrm(0,"ds-loading",19),t.nI1(1,"translate")),2&s&&t.FS9("message",t.bMT(1,1,"loading.search-results"))}function rt(s,_){if(1&s){const e=t.RV6();t.j41(0,"ds-search-results",20),t.nI1(1,"async"),t.bIt("deselectObject",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.deselectEntity())})("selectObject",function(r){t.eBV(e);const v=t.XpG();return t.Njj(v.selectEntity(r))}),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("searchResults",t.bMT(1,10,e.localEntitiesRD$))("sortConfig",null==e.searchOptions?null:e.searchOptions.sort)("searchConfig",e.searchOptions)("selectable",!0)("disableHeader",!0)("hidePaginationDetail",!1)("selectionConfig",t.eq3(12,it,e.entityListId))("showCsvExport",!1)("linkType",e.linkTypes.ExternalLink)("context",e.context)}}function ct(s,_){if(1&s&&(t.j41(0,"div")(1,"ds-alert",21)(2,"p",22),t.EFF(3),t.nI1(4,"translate"),t.k0s()()()),2&s){const e=t.XpG();t.R7$(),t.Y8G("type","alert-info"),t.R7$(2),t.JRh(t.bMT(4,2,e.labelPrefix+e.label+".notFound"))}}var q=function(s){return s.None="None",s.LocalEntity="LocalEntity",s.LocalAuthority="LocalAuthority",s.NewEntity="NewEntity",s.NewAuthority="NewAuthority",s}(q||{});let lt=(()=>{class s{constructor(e,c,r){this.modal=e,this.searchService=c,this.selectService=r,this.pageSize=3,this.labelPrefix="quality-assurance.event.modal.",this.configuration="funding",this.isLoading$=(0,R.of)(!0),this.context=D.o.EntitySearchModalWithNameVariants,this.entityListId="notifications-project-bound",this.authorityListId="notifications-project-bound-authority",this.importType=q,this.linkTypes=w.n,this.selectedImportType=q.None,this.importedObject=new t.bkB,this.subs=[]}ngOnInit(){this.pagination=Object.assign(new h.W,{id:"notifications-project-bound",pageSize:this.pageSize}),this.projectTitle=null!==this.externalSourceEntry.projectTitle?this.externalSourceEntry.projectTitle:this.externalSourceEntry.event.message.title,this.searchOptions=Object.assign(new Z.C({configuration:this.configuration,query:this.projectTitle,pagination:this.pagination})),this.localEntitiesRD$=this.searchService.search(this.searchOptions),this.subs.push(this.localEntitiesRD$.subscribe(()=>this.isLoading$=(0,R.of)(!1)))}close(){this.deselectAllLists(),this.modal.close()}search(e){if((0,x.hj)(e)){const c=/[:]/g;this.isLoading$=(0,R.of)(!0),this.searchOptions=Object.assign(new Z.C({configuration:this.configuration,query:e&&e.replace(c,""),pagination:this.pagination})),this.localEntitiesRD$=this.searchService.search(this.searchOptions),this.subs.push(this.localEntitiesRD$.subscribe(()=>this.isLoading$=(0,R.of)(!1)))}}bound(){void 0!==this.selectedEntity&&this.importedObject.emit(this.selectedEntity),this.selectedImportType=q.None,this.deselectAllLists(),this.close()}deselectEntity(){this.selectedEntity=void 0,this.selectedImportType===q.LocalEntity&&(this.selectedImportType=q.None)}selectEntity(e){this.selectedEntity=e,this.selectedImportType=q.LocalEntity}deselectAllLists(){this.selectService.deselectAll(this.entityListId),this.selectService.deselectAll(this.authorityListId)}ngOnDestroy(){this.deselectAllLists(),this.subs.filter(e=>(0,x.a4)(e)).forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(c){return new(c||s)(t.rXU(m.Lw),t.rXU(H.S),t.rXU(nt.K))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["ds-project-entry-import-modal"]],inputs:{externalSourceEntry:"externalSourceEntry"},standalone:!0,features:[t.aNF],decls:47,vars:44,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-3"],[1,"text-truncate"],["target","_blank",3,"routerLink"],[4,"ngIf"],["id","project-entities",1,"mb-3"],["id","project-search",1,"input-group","mb-3"],["type","text","aria-label","","aria-describedby","",1,"form-control",3,"keyup.enter","ngModelChange","ngModel","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click","dsBtnDisabled"],["type","button",1,"btn","btn-primary",3,"click","dsBtnDisabled"],[3,"message",4,"ngIf"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","showCsvExport","linkType","context","deselectObject","selectObject",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"message"],[3,"deselectObject","selectObject","searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","showCsvExport","linkType","context"],[3,"type"],[1,"lead","mb-0"]],template:function(c,r){if(1&c&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return r.close()}),t.j41(5,"span",3),t.EFF(6,"\xd7"),t.k0s()()(),t.j41(7,"div",4)(8,"small"),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",5)(12,"div",6)(13,"a",7),t.EFF(14),t.k0s()()(),t.DNE(15,at,8,5,"div",8),t.j41(16,"h4"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"div",9)(20,"div",10)(21,"input",11),t.nI1(22,"translate"),t.bIt("keyup.enter",function(){return r.search(r.projectTitle)}),t.mxI("ngModelChange",function(S){return t.DH7(r.projectTitle,S)||(r.projectTitle=S),S}),t.k0s(),t.j41(23,"div",12)(24,"button",13),t.bIt("click",function(){return r.projectTitle=""}),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.j41(27,"button",14),t.bIt("click",function(){return r.search(r.projectTitle)}),t.EFF(28),t.nI1(29,"translate"),t.k0s()()(),t.DNE(30,ot,2,3,"ds-loading",15),t.nI1(31,"async"),t.DNE(32,rt,2,14,"ds-search-results",16),t.nI1(33,"async"),t.nI1(34,"async"),t.DNE(35,ct,5,4,"div",8),t.nI1(36,"async"),t.nI1(37,"async"),t.k0s()(),t.j41(38,"div",17)(39,"div")(40,"button",18),t.bIt("click",function(){return r.close()}),t.EFF(41),t.nI1(42,"translate"),t.k0s()(),t.j41(43,"div")(44,"button",14),t.bIt("click",function(){return r.bound()}),t.EFF(45),t.nI1(46,"translate"),t.k0s()()()),2&c){let v,S;t.R7$(2),t.JRh(t.bMT(3,18,r.labelPrefix+r.label+".title")),t.R7$(7),t.JRh(t.bMT(10,20,r.labelPrefix+r.label+".publication")),t.R7$(4),t.Y8G("routerLink","/items/{{(externalSourceEntry.event.target|async)?.payload?.id}}"),t.R7$(),t.SpI(" ",r.externalSourceEntry.title," "),t.R7$(),t.Y8G("ngIf",r.externalSourceEntry.projectTitle),t.R7$(2),t.JRh(t.bMT(18,22,r.labelPrefix+r.label+".select")),t.R7$(4),t.FS9("placeholder",t.bMT(22,24,r.labelPrefix+r.label+".placeholder")),t.R50("ngModel",r.projectTitle),t.R7$(3),t.Y8G("dsBtnDisabled",""===r.projectTitle),t.R7$(),t.JRh(t.bMT(26,26,r.labelPrefix+r.label+".clear")),t.R7$(2),t.Y8G("dsBtnDisabled",""===r.projectTitle),t.R7$(),t.JRh(t.bMT(29,28,r.labelPrefix+r.label+".search")),t.R7$(2),t.Y8G("ngIf",t.bMT(31,30,r.isLoading$)),t.R7$(2),t.Y8G("ngIf",(null==(v=t.bMT(33,32,r.localEntitiesRD$))||null==v.payload||null==v.payload.page?null:v.payload.page.length)>0&&!0!==t.bMT(34,34,r.isLoading$)),t.R7$(3),t.Y8G("ngIf",(null==(S=t.bMT(36,36,r.localEntitiesRD$))||null==S.payload||null==S.payload.page?null:S.payload.page.length)<1&&!0!==t.bMT(37,38,r.isLoading$)),t.R7$(6),t.JRh(t.bMT(42,40,r.labelPrefix+r.label+".cancel")),t.R7$(3),t.Y8G("dsBtnDisabled",r.selectedImportType===r.importType.None),t.R7$(),t.JRh(t.bMT(46,42,r.labelPrefix+r.label+".bound"))}},dependencies:[T.Wk,d.bT,$.YN,$.me,$.BC,$.vS,X.v,st.N,g.C,d.Jj,A.h,A.D9,f.A],styles:[".modal-footer[_ngcontent-%COMP%]{justify-content:space-between}"]})}}return s})();var ut=a(74449);function pt(s,_){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit,c=t.XpG().ngIf;t.R7$(),t.SpI(" ",c[e]," ")}}function dt(s,_){if(1&s&&(t.qex(0),t.DNE(1,pt,2,1,"span",0),t.nrm(2,"br"),t.bVm()),2&s){const e=_.$implicit,c=t.XpG().ngIf;t.R7$(),t.Y8G("ngIf",c[e])}}function gt(s,_){if(1&s&&(t.qex(0),t.DNE(1,dt,3,1,"ng-container",1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.properties)}}function _t(s,_){if(1&s&&(t.qex(0),t.DNE(1,gt,2,1,"ng-container",0),t.nI1(2,"async"),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngIf",t.bMT(2,1,e.getEPersonData$()))}}let mt=(()=>{class s{constructor(e){this.ePersonDataService=e}getEPersonData$(){if(this.ePersonId)return this.ePersonDataService.findById(this.ePersonId,!0).pipe((0,p.qD)(),(0,p.Bo)())}static{this.\u0275fac=function(c){return new(c||s)(t.rXU(ut.EPersonDataService))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["ds-eperson-data"]],inputs:{ePersonId:"ePersonId",properties:"properties"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(c,r){1&c&&t.DNE(0,_t,3,3,"ng-container",0),2&c&&t.Y8G("ngIf",r.ePersonId)},dependencies:[d.bT,d.pM,d.Jj]})}}return s})();const tt=(s,_)=>({topic:s,source:_}),et=s=>["/items",s],ht=()=>["email"];function vt(s,_){if(1&s&&(t.j41(0,"ds-alert",13),t.nrm(1,"span",14),t.nI1(2,"translate"),t.k0s()),2&s){const e=t.XpG();t.Y8G("type","alert-info"),t.R7$(),t.Y8G("innerHTML",t.i5U(2,2,"quality-assurance.events.description",t.l_i(5,tt,e.selectedTopicName,e.sourceId)),t.npT)}}function ft(s,_){if(1&s&&(t.j41(0,"ds-alert",13),t.nrm(1,"span",14),t.nI1(2,"translate"),t.j41(3,"a",15),t.EFF(4),t.nI1(5,"async"),t.k0s()()),2&s){const e=t.XpG();t.Y8G("type","alert-info"),t.R7$(),t.Y8G("innerHTML",t.i5U(2,4,"quality-assurance.events.description-with-topic-and-target",t.l_i(9,tt,e.selectedTopicName,e.sourceId)),t.npT),t.R7$(2),t.Y8G("routerLink",e.itemPageUrl),t.R7$(),t.JRh(t.bMT(5,7,e.getTargetItemTitle()))}}function bt(s,_){1&s&&(t.nrm(0,"ds-loading",16),t.nI1(1,"translate")),2&s&&t.FS9("message",t.bMT(1,1,"quality-assurance.loading"))}function Et(s,_){1&s&&(t.j41(0,"div",20),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"quality-assurance.noEvents")," "))}function yt(s,_){1&s&&(t.j41(0,"th",29),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"quality-assurance.event.table.project-details")," "))}function Tt(s,_){1&s&&(t.qex(0),t.j41(1,"th",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"th",29),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.bVm()),2&s&&(t.R7$(2),t.SpI(" ",t.bMT(3,2,"quality-assurance.event.table.reasons")," "),t.R7$(3),t.SpI(" ",t.bMT(6,4,"quality-assurance.event.table.person-who-requested")," "))}function It(s,_){if(1&s&&(t.j41(0,"a",33),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(2,et,null==e||null==e.target?null:e.target.id)),t.R7$(),t.JRh(e.title)}}function Rt(s,_){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.title)}}function St(s,_){if(1&s&&(t.j41(0,"div")(1,"span",34),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",35)(5,"a",36),t.EFF(6),t.k0s()()()),2&s){const e=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.table.event.message.serviceUrl")),t.R7$(2),t.Y8G("title",e.event.message.serviceId),t.R7$(),t.Y8G("href",e.event.message.serviceId,t.B4B),t.R7$(),t.JRh(e.event.message.serviceId)}}function Mt(s,_){if(1&s&&(t.j41(0,"div",37)(1,"span",34),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",38)(5,"a",36),t.EFF(6),t.k0s()()()),2&s){const e=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.table.event.message.link")),t.R7$(2),t.Y8G("title",e.event.message.href),t.R7$(),t.Y8G("href",e.event.message.href,t.B4B),t.R7$(),t.JRh(e.event.message.href)}}function jt(s,_){if(1&s&&(t.j41(0,"a",42),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2).$implicit,c=t.XpG(3);t.FS9("href",c.getPIDHref(e.event.message),t.B4B),t.R7$(),t.SpI(" ",e.event.message.value," ")}}function Ct(s,_){if(1&s&&(t.j41(0,"span",40),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(),t.JRh(e.event.message.value)}}function $t(s,_){if(1&s&&(t.j41(0,"td")(1,"p")(2,"span",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.EFF(5,"\xa0"),t.j41(6,"span",40),t.EFF(7),t.k0s()(),t.j41(8,"p")(9,"span",39),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.nrm(12,"br"),t.DNE(13,jt,2,2,"a",41)(14,Ct,2,1,"ng-template",null,4,t.C5r),t.k0s()()),2&s){const e=t.sdS(15),c=t.XpG().$implicit,r=t.XpG(3);t.R7$(3),t.JRh(t.bMT(4,5,"quality-assurance.event.table.pidtype")),t.R7$(4),t.JRh(c.event.message.type),t.R7$(3),t.JRh(t.bMT(11,7,"quality-assurance.event.table.pidvalue")),t.R7$(3),t.Y8G("ngIf",r.hasPIDHref(c.event.message))("ngIfElse",e)}}function Ft(s,_){if(1&s&&(t.j41(0,"td")(1,"p")(2,"span",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"br"),t.j41(6,"span",40),t.EFF(7),t.k0s()()()),2&s){const e=t.XpG().$implicit;t.R7$(3),t.SpI("",t.bMT(4,2,"quality-assurance.event.table.subjectValue")," "),t.R7$(4),t.JRh(e.event.message.value)}}function Pt(s,_){1&s&&t.nrm(0,"i",48)}function At(s,_){1&s&&t.nrm(0,"i",49)}function Dt(s,_){if(1&s){const e=t.RV6();t.j41(0,"td")(1,"p",43)(2,"span",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"br"),t.j41(6,"span",44),t.EFF(7),t.k0s()(),t.j41(8,"button",45),t.bIt("click",function(){t.eBV(e);const r=t.XpG(4);return t.Njj(r.showMore=!r.showMore)}),t.DNE(9,Pt,1,0,"i",46)(10,At,1,0,"i",47),t.EFF(11),t.nI1(12,"translate"),t.k0s()()}if(2&s){const e=t.XpG().$implicit,c=t.XpG(3);t.R7$(),t.AVh("show",c.showMore),t.R7$(2),t.JRh(t.bMT(4,7,"quality-assurance.event.table.abstract")),t.R7$(4),t.JRh(e.event.message.abstract),t.R7$(2),t.Y8G("ngIf",!c.showMore),t.R7$(),t.Y8G("ngIf",c.showMore),t.R7$(),t.SpI(" ",t.bMT(12,9,c.showMore?"quality-assurance.event.table.less":"quality-assurance.event.table.more")," ")}}function Ot(s,_){if(1&s&&(t.j41(0,"span")(1,"span"),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(e.event.message.reason)}}function Gt(s,_){if(1&s&&(t.j41(0,"span"),t.nrm(1,"ds-eperson-data",50),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(),t.Y8G("ePersonId",e.event.originalId)("properties",t.lJ4(2,ht))}}function xt(s,_){if(1&s&&(t.qex(0),t.j41(1,"td")(2,"p"),t.DNE(3,Ot,4,1,"span",26),t.k0s()(),t.j41(4,"td")(5,"p"),t.DNE(6,Gt,2,3,"span",26),t.k0s()(),t.bVm()),2&s){const e=t.XpG().$implicit;t.R7$(3),t.Y8G("ngIf",e.event.message),t.R7$(3),t.Y8G("ngIf",e.event.originalId)}}function Qt(s,_){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.acronym")),t.R7$(4),t.JRh(e.event.message.acronym)}}function kt(s,_){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.code")),t.R7$(4),t.JRh(e.event.message.code)}}function Lt(s,_){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.funder")),t.R7$(4),t.JRh(e.event.message.funder)}}function Bt(s,_){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.fundingProgram")),t.R7$(4),t.JRh(e.event.message.fundingProgram)}}function Ut(s,_){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s()()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.jurisdiction")),t.R7$(4),t.JRh(e.event.message.jurisdiction)}}function Nt(s,_){if(1&s&&(t.j41(0,"a",55),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.FS9("title",e.projectTitle),t.Y8G("routerLink",t.eq3(3,et,e.projectId)),t.R7$(),t.SpI("",e.handle," ")}}function Yt(s,_){if(1&s){const e=t.RV6();t.j41(0,"button",56),t.nI1(1,"translate"),t.bIt("click",function(r){t.eBV(e);const v=t.XpG(2).$implicit;return t.XpG(3).openModalLookup(v),t.Njj(r.stopPropagation())}),t.nrm(2,"i",57),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(1,2,"quality-assurance.event.modal.project.select"))}}function Xt(s,_){if(1&s){const e=t.RV6();t.j41(0,"button",58),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,v=t.XpG(3);return t.Njj(v.removeProject(r))}),t.nrm(2,"i",59),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(1,2,"quality-assurance.event.modal.project.remove"))}}function Jt(s,_){if(1&s&&(t.j41(0,"td")(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p")(5,"span",39),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.nrm(8,"br"),t.j41(9,"a",42),t.EFF(10),t.k0s()(),t.j41(11,"p"),t.DNE(12,Qt,8,4,"span",26)(13,kt,8,4,"span",26)(14,Lt,8,4,"span",26)(15,Bt,8,4,"span",26)(16,Ut,7,4,"span",26),t.k0s(),t.nrm(17,"hr"),t.j41(18,"div"),t.EFF(19),t.nI1(20,"translate"),t.DNE(21,Nt,2,5,"a",51),t.j41(22,"div",52),t.DNE(23,Yt,3,4,"button",53)(24,Xt,3,4,"button",54),t.k0s()()()),2&s){const e=t.XpG().$implicit,c=t.XpG(3);t.R7$(2),t.SpI(" ",t.bMT(3,15,"quality-assurance.event.table.suggestedProject")," "),t.R7$(4),t.JRh(t.bMT(7,17,"quality-assurance.event.table.project")),t.R7$(3),t.FCK("href","",c.sourceUrlForProjectSearch,"",e.event.message.sourceId,"",t.B4B),t.R7$(),t.JRh(e.event.message.title),t.R7$(2),t.Y8G("ngIf",e.event.message.acronym),t.R7$(),t.Y8G("ngIf",e.event.message.code),t.R7$(),t.Y8G("ngIf",e.event.message.funder),t.R7$(),t.Y8G("ngIf",e.event.message.fundingProgram),t.R7$(),t.Y8G("ngIf",e.event.message.jurisdiction),t.R7$(3),t.SpI(" ",t.bMT(20,19,e.hasProject?"quality-assurance.event.project.found":"quality-assurance.event.project.notFound")," "),t.R7$(2),t.Y8G("ngIf",e.hasProject),t.R7$(2),t.Y8G("ngIf",!e.hasProject),t.R7$(),t.Y8G("ngIf",e.hasProject)}}function Vt(s,_){if(1&s){const e=t.RV6();t.j41(0,"button",65),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,v=t.XpG(3),S=t.sdS(19);return t.Njj(v.modalChoice("ACCEPTED",r,S))}),t.nrm(3,"i",66),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.import")),t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.import"))}}function qt(s,_){if(1&s){const e=t.RV6();t.j41(0,"button",65),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,v=t.XpG(3);return t.Njj(v.executeAction("ACCEPTED",r))}),t.nrm(3,"i",66),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.accept")),t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.accept"))}}function zt(s,_){if(1&s){const e=t.RV6();t.j41(0,"button",67),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,v=t.XpG(3),S=t.sdS(23);return t.Njj(v.openModal("REJECTED",r,S))}),t.nrm(3,"i",59),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.reject")),t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.reject"))}}function Wt(s,_){if(1&s){const e=t.RV6();t.j41(0,"button",67),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,v=t.XpG(3),S=t.sdS(25);return t.Njj(v.openModal("UNDO",r,S))}),t.nrm(3,"i",59),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.undo")),t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.undo"))}}function Kt(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",60),t.DNE(1,Vt,4,7,"button",61)(2,qt,4,7,"button",61),t.j41(3,"button",62),t.nI1(4,"translate"),t.nI1(5,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,v=t.XpG(3),S=t.sdS(21);return t.Njj(v.openModal("DISCARDED",r,S))}),t.nrm(6,"i",63),t.k0s(),t.DNE(7,zt,4,7,"button",64),t.nI1(8,"async"),t.DNE(9,Wt,4,7,"button",64),t.nI1(10,"async"),t.k0s()}if(2&s){const e=t.XpG().$implicit,c=t.XpG(3);t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/PROJECT")),t.R7$(),t.Y8G("ngIf",-1===c.showTopic.indexOf("/PROJECT")),t.R7$(),t.FS9("ngbTooltip",t.bMT(4,7,"quality-assurance.event.action.ignore")),t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(5,9,"quality-assurance.event.action.ignore")),t.R7$(4),t.Y8G("ngIf",t.bMT(8,11,c.isAdmin$)),t.R7$(2),t.Y8G("ngIf",!1===t.bMT(10,13,c.isAdmin$))}}function Ht(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",60)(1,"button",67),t.nI1(2,"translate"),t.nI1(3,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,v=t.XpG(3),S=t.sdS(25);return t.Njj(v.openModal("UNDO",r,S))}),t.nrm(4,"i",59),t.k0s()()}if(2&s){const e=t.XpG().$implicit;t.R7$(),t.FS9("ngbTooltip",t.bMT(2,3,"quality-assurance.event.action.undo")),t.Y8G("dsBtnDisabled",e.isRunning),t.BMQ("aria-label",t.bMT(3,5,"quality-assurance.event.action.undo"))}}function wt(s,_){if(1&s&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,It,2,4,"a",30)(5,Rt,2,1,"span",26)(6,St,7,6,"div",26)(7,Mt,7,6,"div",31),t.k0s(),t.DNE(8,$t,16,9,"td",26)(9,Ft,8,4,"td",26)(10,Dt,13,11,"td",26)(11,xt,7,2,"ng-container",26)(12,Jt,25,21,"td",26),t.j41(13,"td"),t.DNE(14,Kt,11,15,"div",32),t.nI1(15,"async"),t.DNE(16,Ht,5,7,"div",32),t.nI1(17,"async"),t.k0s()()),2&s){const e=_.$implicit,c=t.XpG(3);t.R7$(2),t.SpI("",null==e||null==e.event?null:e.event.trust," "),t.R7$(2),t.Y8G("ngIf",null==e?null:e.target),t.R7$(),t.Y8G("ngIf",!(null!=e&&e.target)),t.R7$(),t.Y8G("ngIf",null==e||null==e.event||null==e.event.message?null:e.event.message.serviceId),t.R7$(),t.Y8G("ngIf",null==e||null==e.event||null==e.event.message?null:e.event.message.href),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/PID")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/SUBJECT")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/ABSTRACT")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/REINSTATE")||-1!==c.showTopic.indexOf("/WITHDRAWN")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/PROJECT")),t.R7$(2),t.Y8G("ngIf",t.bMT(15,12,c.isAdmin$)||!c.isReinstateWithdrawnRequest),t.R7$(2),t.Y8G("ngIf",!0!==t.bMT(17,14,c.isAdmin$)&&c.isReinstateWithdrawnRequest)}}function Zt(s,_){if(1&s&&(t.j41(0,"div",21)(1,"table",22)(2,"thead")(3,"tr")(4,"th",23),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th",24),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.DNE(10,yt,3,3,"th",25)(11,Tt,7,6,"ng-container",26),t.j41(12,"th",27),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,wt,18,16,"tr",28),t.nI1(17,"async"),t.k0s()()()),2&s){const e=t.XpG(2);t.R7$(5),t.JRh(t.bMT(6,6,"quality-assurance.event.table.trust")),t.R7$(3),t.JRh(t.bMT(9,8,"quality-assurance.event.table.publication")),t.R7$(2),t.Y8G("ngIf",e.hasDetailColumn()&&-1!==e.showTopic.indexOf("/PROJECT")),t.R7$(),t.Y8G("ngIf",e.hasDetailColumn()&&(-1!==e.showTopic.indexOf("/REINSTATE")||-1!==e.showTopic.indexOf("/WITHDRAWN"))),t.R7$(2),t.JRh(t.bMT(14,10,"quality-assurance.event.table.actions")),t.R7$(3),t.Y8G("ngForOf",t.bMT(17,12,e.eventsUpdated$))}}function te(s,_){if(1&s){const e=t.RV6();t.j41(0,"ds-pagination",17),t.nI1(1,"async"),t.bIt("paginationChange",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.getQualityAssuranceEvents())}),t.qex(2),t.DNE(3,Et,3,3,"div",18),t.nI1(4,"async"),t.DNE(5,Zt,18,14,"div",19),t.nI1(6,"async"),t.bVm(),t.k0s()}if(2&s){let e,c;const r=t.XpG();t.Y8G("paginationOptions",r.paginationConfig)("collectionSize",t.bMT(1,5,r.totalElements$))("sortOptions",r.paginationSortConfig),t.R7$(3),t.Y8G("ngIf",0===(null==(e=t.bMT(4,7,r.eventsUpdated$))?null:e.length)),t.R7$(2),t.Y8G("ngIf",0!==(null==(c=t.bMT(6,9,r.eventsUpdated$))?null:c.length))}}function ee(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h4",69),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",71),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",66),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.accept.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.import"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function ne(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h1",75),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",76),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",59),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.ignore.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.ignore"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function se(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h1",77),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",76),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",59),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.reject.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.reject"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function ie(s,_){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h1",78),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",76),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",59),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.undo.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.undo"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}let ae=(()=>{class s{constructor(e,c,r,v,S,K,z,re){this.activatedRoute=e,this.modalService=c,this.notificationsService=r,this.qualityAssuranceEventRestService=v,this.paginationService=S,this.translateService=K,this.authorizationService=z,this.itemService=re,this.paginationConfig=Object.assign(new h.W,{id:"bep",currentPage:1,pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.paginationSortConfig=new L.z("trust",L.U.DESC),this.eventsUpdated$=new E.t([]),this.totalElements$=new E.t(null),this.isEventPageLoading=new E.t(!1),this.showMore=!1,this.defaultConfig=Object.assign(new G._,{sort:this.paginationSortConfig}),this.subs=[]}ngOnInit(){this.isEventPageLoading.next(!0),this.isAdmin$=this.authorizationService.isAuthorized(B._.AdministratorOf),this.activatedRoute.paramMap.pipe((0,I.M)(e=>{this.sourceUrlForProjectSearch=Y.c.qualityAssuranceConfig.sourceUrlMapForProjectSearch[e.get("sourceId")],this.sourceId=e.get("sourceId")}),(0,M.T)(e=>e.get("topicId")),(0,j.s)(1),(0,C.n)(e=>{this.showTopic=e.replace(/!/g,"/"),this.topic=e;const r=this.showTopic?.split(":");return this.targetId=r.length>2?r.pop():null,this.selectedTopicName=r[1],this.sourceId=r[0],this.getQualityAssuranceEvents()})).subscribe({next:e=>{this.eventsUpdated$.next(e),this.isEventPageLoading.next(!1)},error:e=>{this.isEventPageLoading.next(!1)}})}hasDetailColumn(){return-1!==this.showTopic.indexOf("/PROJECT")||-1!==this.showTopic.indexOf("/PID")||-1!==this.showTopic.indexOf("/SUBJECT")||-1!==this.showTopic.indexOf("/WITHDRAWN")||-1!==this.showTopic.indexOf("/REINSTATE")||-1!==this.showTopic.indexOf("/ABSTRACT")}get isReinstateWithdrawnRequest(){return-1!==this.showTopic.indexOf("/WITHDRAWN")||-1!==this.showTopic.indexOf("/REINSTATE")}modalChoice(e,c,r){c.hasProject?this.executeAction(e,c):this.openModal(e,c,r)}openModal(e,c,r){this.modalService.open(r,{ariaLabelledBy:"modal-basic-title"}).result.then(v=>{"do"===v&&(c.reason=this.selectedReason,this.executeAction(e,c)),this.selectedReason=null},v=>{this.selectedReason=null})}openModalLookup(e){this.modalRef=this.modalService.open(lt,{size:"lg"});const c=this.modalRef.componentInstance;c.externalSourceEntry=e,c.label="project",this.subs.push(c.importedObject.pipe((0,j.s)(1)).subscribe(r=>{const v=u.O.first(r.indexableObject.metadata,"dc.title");this.boundProject(e,r.indexableObject.id,v.value,r.indexableObject.handle)}))}executeAction(e,c){let r;c.isRunning=!0,r="UNDO"===e?this.delete(c):this.qualityAssuranceEventRestService.patchEvent(e,c.event,c.reason),this.subs.push(r.pipe((0,p.qD)(),(0,C.n)(v=>v.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.action.saved")),this.getQualityAssuranceEvents()):(this.notificationsService.error(this.translateService.instant("quality-assurance.event.action.error")),(0,R.of)(this.eventsUpdated$.value)))).subscribe(v=>{this.eventsUpdated$.next(v),c.isRunning=!1}))}boundProject(e,c,r,v){e.isRunning=!0,this.subs.push(this.qualityAssuranceEventRestService.boundProject(e.id,c).pipe((0,p.qD)()).subscribe(S=>{S.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.project.bounded")),e.hasProject=!0,e.projectTitle=r,e.handle=v,e.projectId=c):this.notificationsService.error(this.translateService.instant("quality-assurance.event.project.error")),e.isRunning=!1}))}removeProject(e){e.isRunning=!0,this.subs.push(this.qualityAssuranceEventRestService.removeProject(e.id).pipe((0,p.qD)()).subscribe(c=>{c.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.project.removed")),e.hasProject=!1,e.projectTitle=null,e.handle=null,e.projectId=null):this.notificationsService.error(this.translateService.instant("quality-assurance.event.project.error")),e.isRunning=!1}))}hasPIDHref(e){return null!==this.getPIDHref(e)}getPIDHref(e){return e.pidHref}getQualityAssuranceEvents(){return this.paginationService.getFindListOptions(this.paginationConfig.id,this.defaultConfig).pipe((0,i.F)(),(0,C.n)(e=>this.qualityAssuranceEventRestService.getEventsByTopic(this.topic,e,(0,k.s)("target"),(0,k.s)("related"))),(0,p.qD)(),(0,C.n)(e=>{if(e.hasSucceeded)return this.totalElements$.next(e.payload.totalElements),e.payload?.page?.length>0?this.fetchEvents(e.payload.page):(0,R.of)([]);throw new Error("Can't retrieve Quality Assurance events from the Broker events REST service")}),(0,j.s)(1),(0,I.M)(()=>{this.qualityAssuranceEventRestService.clearFindByTopicRequests()}))}ngOnDestroy(){this.subs.filter(e=>(0,x.a4)(e)).forEach(e=>e.unsubscribe())}fetchEvents(e){return(0,F.H)(e).pipe((0,o.Z)(c=>{const r=c.related.pipe((0,p.qD)()),v=c.target.pipe((0,p.qD)());return(0,O.z)([r,v]).pipe((0,M.T)(([S,K])=>{const z={event:c,id:c.id,title:c.title,hasProject:!1,projectTitle:null,projectId:null,handle:null,reason:null,isRunning:!1,target:K?.hasSucceeded?K.payload:null};return S?.hasSucceeded&&S?.payload?.id&&(z.hasProject=!0,z.projectTitle=c.message.title,z.projectId=S?.payload?.id,z.handle=S?.payload?.handle),z}))}),(0,N.S)((c,r)=>[...c,r],[]),(0,Q.H)())}delete(e){return this.qualityAssuranceEventRestService.deleteQAEvent(e)}getTargetItemTitle(){return this.itemService.findById(this.targetId).pipe((0,j.s)(1),(0,p.qD)(),(0,p.Bo)(),(0,I.M)(e=>this.itemPageUrl=(0,l._o)(e)),(0,M.T)(e=>e.firstMetadataValue("dc.title")))}static{this.\u0275fac=function(c){return new(c||s)(t.rXU(T.nX),t.rXU(m.Bq),t.rXU(V.I),t.rXU(b.QualityAssuranceEventDataService),t.rXU(y.m),t.rXU(A.c$),t.rXU(n.AuthorizationDataService),t.rXU(J.ItemDataService))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["ds-quality-assurance-events"]],standalone:!0,features:[t.aNF],decls:26,vars:15,consts:[["acceptModal",""],["ignoreModal",""],["rejectModal",""],["undoModal",""],["noPID",""],[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between"],[3,"type",4,"ngIf"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","sortOptions","paginationChange",4,"ngIf"],[3,"type"],[3,"innerHTML"],["target","_blank",3,"routerLink"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","sortOptions"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","events",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"trust-col"],["scope","col",1,"title-col"],["scope","col","class","content-col",4,"ngIf"],[4,"ngIf"],["scope","col",1,"button-col"],[4,"ngFor","ngForOf"],["scope","col",1,"content-col"],["target","_blank","rel","noopener noreferrer",3,"routerLink",4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],["class","btn-group button-width",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"routerLink"],[1,"small","pr-1"],[3,"title"],["target","_blank",3,"href"],[1,"d-flex","align-items-center"],[1,"text-truncate","d-inline-block","w-75",3,"title"],[1,"small"],[1,"badge","badge-info"],["rel","noopener noreferrer","target","_blank",3,"href",4,"ngIf","ngIfElse"],["rel","noopener noreferrer","target","_blank",3,"href"],[1,"abstract-container"],[1,"text-ellipsis"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","fas fa-angle-down",4,"ngIf"],["class","fas fa-angle-up",4,"ngIf"],[1,"fas","fa-angle-down"],[1,"fas","fa-angle-up"],[3,"ePersonId","properties"],["target","_blank","rel","noopener noreferrer",3,"title","routerLink",4,"ngIf"],[1,"btn-group"],["class","btn btn-outline-primary btn-sm",3,"dsBtnDisabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"dsBtnDisabled","click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"title","routerLink"],[1,"btn","btn-outline-primary","btn-sm",3,"click","dsBtnDisabled"],[1,"fas","fa-search"],[1,"btn","btn-outline-danger","btn-sm",3,"click","dsBtnDisabled"],[1,"fas","fa-trash-alt"],[1,"btn-group","button-width"],["class","btn btn-outline-success btn-sm button-width","container","body",3,"ngbTooltip","dsBtnDisabled","click",4,"ngIf"],["container","body",1,"btn","btn-outline-dark","btn-sm","button-width",3,"click","ngbTooltip","dsBtnDisabled"],[1,"fas","fa-ban"],["class","btn btn-outline-danger btn-sm button-width","container","body",3,"ngbTooltip","dsBtnDisabled","click",4,"ngIf"],["container","body",1,"btn","btn-outline-success","btn-sm","button-width",3,"click","ngbTooltip","dsBtnDisabled"],[1,"fas","fa-check"],["container","body",1,"btn","btn-outline-danger","btn-sm","button-width",3,"click","ngbTooltip","dsBtnDisabled"],[1,"modal-header"],["id","acceptModal",1,"modal-title"],[1,"modal-body"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"d-none","d-sm-inline"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-close"],["id","ignoreModal",1,"modal-title","h4"],[1,"btn","btn-outline-danger","float-right",3,"click"],["id","rejectModal",1,"modal-title","h4"],["id","undoModal",1,"modal-title","h4"]],template:function(c,r){1&c&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"h1",8)(4,"div",9),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.DNE(7,vt,3,8,"ds-alert",10)(8,ft,6,12,"ds-alert",10),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"h2",8),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.DNE(14,bt,2,3,"ds-loading",11),t.nI1(15,"async"),t.DNE(16,te,7,11,"ds-pagination",12),t.nI1(17,"async"),t.k0s()()(),t.DNE(18,ee,18,12,"ng-template",null,0,t.C5r)(20,ne,18,12,"ng-template",null,1,t.C5r)(22,se,18,12,"ng-template",null,2,t.C5r)(24,ie,18,12,"ng-template",null,3,t.C5r)),2&c&&(t.R7$(5),t.SpI(" ",t.bMT(6,7,"notifications.events.title")," "),t.R7$(2),t.Y8G("ngIf",!r.targetId),t.R7$(),t.Y8G("ngIf",r.targetId),t.R7$(4),t.Lme(" ",t.bMT(13,9,"quality-assurance.events.topic")," ",r.showTopic," "),t.R7$(2),t.Y8G("ngIf",t.bMT(15,11,r.isEventPageLoading)),t.R7$(2),t.Y8G("ngIf",!0!==t.bMT(17,13,r.isEventPageLoading)))},dependencies:[g.C,d.bT,X.v,W.e,d.pM,T.Wk,m.n8,m.md,d.Jj,A.h,A.D9,mt,f.A],styles:[".button-col[_ngcontent-%COMP%], .trust-col[_ngcontent-%COMP%]{width:15%}.title-col[_ngcontent-%COMP%]{width:30%}.content-col[_ngcontent-%COMP%]{width:40%}.button-width[_ngcontent-%COMP%]{width:100%}.abstract-container[_ngcontent-%COMP%]{height:76px;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis}.show[_ngcontent-%COMP%]{overflow:visible;height:auto}"]})}}return s})(),oe=(()=>{class s{static{this.\u0275fac=function(c){return new(c||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["ds-quality-assurance-events-page"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(c,r){1&c&&t.nrm(0,"ds-quality-assurance-events")},dependencies:[ae],encapsulation:2})}}return s})()},83527:(U,P,a)=>{a.d(P,{h:()=>d});const d=(T,m)=>({pageId:T.queryParams.pageId,pageSize:parseInt(T.queryParams.pageSize,10),currentPage:parseInt(T.queryParams.page,10)})},93084:(U,P,a)=>{a.d(P,{c:()=>R});var d=a(54438),T=a(7901),m=a(96354),A=a(82640),E=a(13246);const R=(O,I,M=(0,d.WQX)(T.Ix),j=(0,d.WQX)(E.p),C=(0,d.WQX)(A.vQ))=>j.getSources(C.qualityAssuranceConfig.pageSize,0).pipe((0,m.T)(o=>(1===o.page.length&&M.navigate([F(O)+"/"+o.page[0].id]),o.page)));function F(O){return O.pathFromRoot.map(I=>I.url.map(M=>M.toString()).join("/")).join("/")}},89473:(U,P,a)=>{a.d(P,{t:()=>T});var d=a(54438);let T=(()=>{class m{resolve(E,R){return{pageId:E.queryParams.pageId,pageSize:parseInt(E.queryParams.pageSize,10),currentPage:parseInt(E.queryParams.page,10)}}static{this.\u0275fac=function(R){return new(R||m)}}static{this.\u0275prov=d.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},69296:(U,P,a)=>{a.d(P,{E:()=>y});var d=a(60177),T=a(7901),m=a(41780),A=a(96697),E=a(23294),R=a(22978),F=a(16292),O=a(82777),I=a(82394),M=a(5682),j=a(23401),C=a(61956),i=a(54438);const o=u=>({param:u}),N=u=>[u];function Q(u,p){1&u&&(i.nrm(0,"ds-loading",8),i.nI1(1,"translate")),2&u&&i.FS9("message",i.bMT(1,1,"quality-assurance.loading"))}function Y(u,p){1&u&&i.nrm(0,"ds-loading",12)}function L(u,p){1&u&&(i.j41(0,"div",15),i.EFF(1),i.nI1(2,"translate"),i.k0s()),2&u&&(i.R7$(),i.SpI(" ",i.bMT(2,1,"quality-assurance.noSource")," "))}function n(u,p){if(1&u&&(i.j41(0,"tr")(1,"td"),i.EFF(2),i.k0s(),i.j41(3,"td"),i.EFF(4),i.nI1(5,"date"),i.k0s(),i.j41(6,"td")(7,"div",20)(8,"button",21),i.nI1(9,"translate"),i.j41(10,"span",22),i.EFF(11),i.k0s(),i.nrm(12,"i",23),i.k0s()()()()),2&u){const l=p.$implicit;i.R7$(2),i.JRh(l.id),i.R7$(2),i.JRh(i.i5U(5,5,l.lastEvent,"dd/MM/yyyy hh:mm")),i.R7$(4),i.FS9("title",i.i5U(9,8,"quality-assurance.source-list.button.detail",i.eq3(11,o,l.id))),i.Y8G("routerLink",i.eq3(13,N,l.id)),i.R7$(3),i.JRh(l.totalEvents)}}function B(u,p){if(1&u&&(i.j41(0,"div",16)(1,"table",17)(2,"thead")(3,"tr")(4,"th",18),i.EFF(5),i.nI1(6,"translate"),i.k0s(),i.j41(7,"th",18),i.EFF(8),i.nI1(9,"translate"),i.k0s(),i.j41(10,"th",18),i.EFF(11),i.nI1(12,"translate"),i.k0s()()(),i.j41(13,"tbody"),i.DNE(14,n,13,15,"tr",19),i.nI1(15,"async"),i.k0s()()()),2&u){const l=i.XpG(3);i.R7$(5),i.JRh(i.bMT(6,4,"quality-assurance.table.source")),i.R7$(3),i.JRh(i.bMT(9,6,"quality-assurance.table.last-event")),i.R7$(3),i.JRh(i.bMT(12,8,"quality-assurance.table.actions")),i.R7$(3),i.Y8G("ngForOf",i.bMT(15,10,l.sources$))}}function G(u,p){if(1&u&&(i.qex(0),i.DNE(1,L,3,3,"div",13),i.nI1(2,"async"),i.DNE(3,B,16,12,"div",14),i.nI1(4,"async"),i.bVm()),2&u){let l,g;const f=i.XpG(2);i.R7$(),i.Y8G("ngIf",0===(null==(l=i.bMT(2,2,f.sources$))?null:l.length)),i.R7$(2),i.Y8G("ngIf",0!==(null==(g=i.bMT(4,4,f.sources$))?null:g.length))}}function J(u,p){if(1&u){const l=i.RV6();i.j41(0,"ds-pagination",9),i.nI1(1,"async"),i.bIt("paginationChange",function(){i.eBV(l);const f=i.XpG();return i.Njj(f.getQualityAssuranceSource())}),i.DNE(2,Y,1,0,"ds-loading",10),i.nI1(3,"async"),i.DNE(4,G,5,6,"ng-container",11),i.nI1(5,"async"),i.k0s()}if(2&u){const l=i.XpG();i.Y8G("paginationOptions",l.paginationConfig)("collectionSize",i.bMT(1,6,l.totalElements$))("hideGear",!1)("hideSortOptions",!0),i.R7$(2),i.Y8G("ngIf",i.bMT(3,8,l.isSourceProcessing())),i.R7$(2),i.Y8G("ngIf",!0!==i.bMT(5,10,l.isSourceProcessing()))}}let b=(()=>{class u{constructor(l,g){this.paginationService=l,this.notificationsStateService=g,this.paginationConfig=Object.assign(new j.W,{id:"btp",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.subs=[]}ngOnInit(){this.sources$=this.notificationsStateService.getQualityAssuranceSource(),this.totalElements$=this.notificationsStateService.getQualityAssuranceSourceTotals()}ngAfterViewInit(){this.subs.push(this.notificationsStateService.isQualityAssuranceSourceLoaded().pipe((0,A.s)(1)).subscribe(()=>{this.getQualityAssuranceSource()}))}isSourceLoading(){return this.notificationsStateService.isQualityAssuranceSourceLoading()}isSourceProcessing(){return this.notificationsStateService.isQualityAssuranceSourceProcessing()}getQualityAssuranceSource(){this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,E.F)()).subscribe(l=>{this.notificationsStateService.dispatchRetrieveQualityAssuranceSource(l.pageSize,l.currentPage)})}updatePaginationFromRouteParams(l){l.currentPage&&(this.paginationConfig.currentPage=l.currentPage),l.pageSize&&(this.paginationConfig.pageSize=this.paginationConfig.pageSizeOptions.includes(l.pageSize)?l.pageSize:this.paginationConfig.pageSizeOptions[0])}ngOnDestroy(){this.subs.filter(l=>(0,O.a4)(l)).forEach(l=>l.unsubscribe())}static{this.\u0275fac=function(g){return new(g||u)(i.rXU(R.m),i.rXU(C.p))}}static{this.\u0275cmp=i.VBU({type:u,selectors:[["ds-quality-assurance-source"]],standalone:!0,features:[i.aNF],decls:16,vars:14,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type","content"],[1,"h4","border-bottom","pb-2"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hideSortOptions","paginationChange",4,"ngIf"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","hideSortOptions"],["class","container","message","'quality-assurance.loading' | translate",4,"ngIf"],[4,"ngIf"],["message","'quality-assurance.loading' | translate",1,"container"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","routerLink"],[1,"badge","badge-info"],[1,"fas","fa-info","fa-fw"]],template:function(g,f){1&g&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i.EFF(4),i.nI1(5,"translate"),i.k0s(),i.nrm(6,"ds-alert",4),i.k0s()(),i.j41(7,"div",1)(8,"div",2)(9,"h2",5),i.EFF(10),i.nI1(11,"translate"),i.k0s(),i.DNE(12,Q,2,3,"ds-loading",6),i.nI1(13,"async"),i.DNE(14,J,6,12,"ds-pagination",7),i.nI1(15,"async"),i.k0s()()()),2&g&&(i.R7$(4),i.JRh(i.bMT(5,6,"quality-assurance.title")),i.R7$(2),i.Y8G("type","alert-info")("content","quality-assurance.source.description"),i.R7$(4),i.JRh(i.bMT(11,8,"quality-assurance.source")),i.R7$(2),i.Y8G("ngIf",i.bMT(13,10,f.isSourceLoading())),i.R7$(2),i.Y8G("ngIf",!0!==i.bMT(15,12,f.isSourceLoading())))},dependencies:[F.C,d.bT,I.v,M.e,d.pM,T.Wk,d.Jj,m.h,m.D9,d.vh]})}}return u})(),y=(()=>{class u{static{this.\u0275fac=function(g){return new(g||u)}}static{this.\u0275cmp=i.VBU({type:u,selectors:[["ds-quality-assurance-source-page-component"]],standalone:!0,features:[i.aNF],decls:1,vars:0,template:function(g,f){1&g&&i.nrm(0,"ds-quality-assurance-source")},dependencies:[b],encapsulation:2})}}return u})()},87499:(U,P,a)=>{a.d(P,{G:()=>T});var d=a(54438);let T=(()=>{class m{resolve(E,R){return{pageId:E.queryParams.pageId,pageSize:parseInt(E.queryParams.pageSize,10),currentPage:parseInt(E.queryParams.page,10)}}static{this.\u0275fac=function(R){return new(R||m)}}static{this.\u0275prov=d.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},31838:(U,P,a)=>{a.d(P,{V:()=>W});var d=a(60177),T=a(7901),m=a(41780),A=a(88141),E=a(96697),R=a(23294),F=a(96354),O=a(47483),I=a(29326),M=a(22978),j=a(80183),C=a(90887),i=a(16292),o=a(82777),N=a(82394),Q=a(5682),Y=a(23401),L=a(61956),n=a(54438);const B=h=>({source:h}),G=h=>({param:h}),J=(h,k,t)=>[h,k,t];function b(h,k){if(1&h&&(n.j41(0,"ds-alert",7),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&h){const t=n.XpG();n.Y8G("type","alert-info"),n.R7$(),n.JRh(n.i5U(2,2,"quality-assurance.topics.description",n.eq3(5,B,t.sourceId)))}}function y(h,k){if(1&h&&(n.j41(0,"ds-alert",7),n.EFF(1),n.nI1(2,"translate"),n.j41(3,"a",8),n.EFF(4),n.nI1(5,"async"),n.k0s()()),2&h){const t=n.XpG();n.Y8G("type","alert-info"),n.R7$(),n.SpI(" ",n.i5U(2,4,"quality-assurance.topics.description-with-target",n.eq3(9,B,t.sourceId))," "),n.R7$(2),n.Y8G("routerLink",t.itemPageUrl),n.R7$(),n.JRh(n.bMT(5,7,t.getTargetItemTitle()))}}function u(h,k){1&h&&(n.nrm(0,"ds-loading",9),n.nI1(1,"translate")),2&h&&n.FS9("message",n.bMT(1,1,"quality-assurance.loading"))}function p(h,k){1&h&&n.nrm(0,"ds-loading",13)}function l(h,k){1&h&&(n.j41(0,"div",16),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&h&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"quality-assurance.noTopics")," "))}function g(h,k){if(1&h&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.nI1(5,"date"),n.k0s(),n.j41(6,"td")(7,"div",21)(8,"button",22),n.nI1(9,"translate"),n.j41(10,"span",23),n.EFF(11),n.k0s(),n.nrm(12,"i",24),n.k0s()()()()),2&h){const t=k.$implicit,$=n.XpG(4);n.R7$(2),n.JRh(t.name),n.R7$(2),n.JRh(n.i5U(5,5,t.lastEvent,"dd/MM/yyyy hh:mm")),n.R7$(4),n.FS9("title",n.i5U(9,8,"quality-assurance.topics-list.button.detail",n.eq3(11,G,t.name))),n.Y8G("routerLink",n.sMw(13,J,$.getQualityAssuranceRoute(),$.sourceId,t.id)),n.R7$(3),n.JRh(t.totalEvents)}}function f(h,k){if(1&h&&(n.j41(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th",19),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th",19),n.EFF(8),n.nI1(9,"translate"),n.k0s(),n.j41(10,"th",19),n.EFF(11),n.nI1(12,"translate"),n.k0s()()(),n.j41(13,"tbody"),n.DNE(14,g,13,17,"tr",20),n.nI1(15,"async"),n.k0s()()()),2&h){const t=n.XpG(3);n.R7$(5),n.JRh(n.bMT(6,4,"quality-assurance.table.topic")),n.R7$(3),n.JRh(n.bMT(9,6,"quality-assurance.table.last-event")),n.R7$(3),n.JRh(n.bMT(12,8,"quality-assurance.table.actions")),n.R7$(3),n.Y8G("ngForOf",n.bMT(15,10,t.topics$))}}function x(h,k){if(1&h&&(n.qex(0),n.DNE(1,l,3,3,"div",14),n.nI1(2,"async"),n.DNE(3,f,16,12,"div",15),n.nI1(4,"async"),n.bVm()),2&h){let t,$;const D=n.XpG(2);n.R7$(),n.Y8G("ngIf",0===(null==(t=n.bMT(2,2,D.topics$))?null:t.length)),n.R7$(2),n.Y8G("ngIf",0!==(null==($=n.bMT(4,4,D.topics$))?null:$.length))}}function X(h,k){if(1&h){const t=n.RV6();n.j41(0,"ds-pagination",10),n.nI1(1,"async"),n.bIt("paginationChange",function(){n.eBV(t);const D=n.XpG();return n.Njj(D.getQualityAssuranceTopics(D.sourceId,D.targetId))}),n.DNE(2,p,1,0,"ds-loading",11),n.nI1(3,"async"),n.DNE(4,x,5,6,"ng-container",12),n.nI1(5,"async"),n.k0s()}if(2&h){const t=n.XpG();n.Y8G("paginationOptions",t.paginationConfig)("collectionSize",n.bMT(1,6,t.totalElements$))("hideGear",!1)("hideSortOptions",!0),n.R7$(2),n.Y8G("ngIf",n.bMT(3,8,t.isTopicsProcessing())),n.R7$(2),n.Y8G("ngIf",!0!==n.bMT(5,10,t.isTopicsProcessing()))}}let V=(()=>{class h{constructor(t,$,D,H,w){this.paginationService=t,this.activatedRoute=$,this.itemService=D,this.notificationsStateService=H,this.router=w,this.paginationConfig=Object.assign(new Y.W,{id:"btp",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.subs=[],this.sourceId=this.activatedRoute.snapshot.params.sourceId,this.targetId=this.activatedRoute.snapshot.params.targetId}ngOnInit(){this.topics$=this.notificationsStateService.getQualityAssuranceTopics().pipe((0,A.M)(t=>{1===t.length&&"true"===this.activatedRoute.snapshot.queryParams?.forward&&this.router.navigate([this.getQualityAssuranceRoute(),this.sourceId,t[0].id])})),this.totalElements$=this.notificationsStateService.getQualityAssuranceTopicsTotals()}ngAfterViewInit(){this.subs.push(this.notificationsStateService.isQualityAssuranceTopicsLoaded().pipe((0,E.s)(1)).subscribe(()=>{this.getQualityAssuranceTopics(this.sourceId,this.targetId)}))}isTopicsLoading(){return this.notificationsStateService.isQualityAssuranceTopicsLoading()}isTopicsProcessing(){return this.notificationsStateService.isQualityAssuranceTopicsProcessing()}getQualityAssuranceTopics(t,$){this.subs.push(this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,R.F)()).subscribe(D=>{this.notificationsStateService.dispatchRetrieveQualityAssuranceTopics(D.pageSize,D.currentPage,t,$)}))}updatePaginationFromRouteParams(t){t.currentPage&&(this.paginationConfig.currentPage=t.currentPage),t.pageSize&&(this.paginationConfig.pageSize=this.paginationConfig.pageSizeOptions.includes(t.pageSize)?t.pageSize:this.paginationConfig.pageSizeOptions[0])}getTargetItemTitle(){return this.itemService.findById(this.targetId).pipe((0,E.s)(1),(0,j.qD)(),(0,j.Bo)(),(0,A.M)(t=>this.itemPageUrl=(0,C._o)(t)),(0,F.T)(t=>t.firstMetadataValue("dc.title")))}getItemPageRoute(t){return(0,C._o)(t)}getQualityAssuranceRoute(){return(0,O.b7)()}ngOnDestroy(){this.subs.filter(t=>(0,o.a4)(t)).forEach(t=>t.unsubscribe())}static{this.\u0275fac=function($){return new($||h)(n.rXU(M.m),n.rXU(T.nX),n.rXU(I.ItemDataService),n.rXU(L.p),n.rXU(T.Ix))}}static{this.\u0275cmp=n.VBU({type:h,selectors:[["ds-quality-assurance-topic"]],standalone:!0,features:[n.aNF],decls:17,vars:14,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type",4,"ngIf"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hideSortOptions","paginationChange",4,"ngIf"],[3,"type"],[3,"routerLink"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","hideSortOptions"],["class","container","message","'quality-assurance.loading' | translate",4,"ngIf"],[4,"ngIf"],["message","'quality-assurance.loading' | translate",1,"container"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","routerLink"],[1,"badge","badge-info"],[1,"fas","fa-info","fa-fw"]],template:function($,D){1&$&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.DNE(6,b,3,7,"ds-alert",4)(7,y,6,11,"ds-alert",4),n.k0s()(),n.j41(8,"div",1)(9,"div",2)(10,"h2",3),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.DNE(13,u,2,3,"ds-loading",5),n.nI1(14,"async"),n.DNE(15,X,6,12,"ds-pagination",6),n.nI1(16,"async"),n.k0s()()()),2&$&&(n.R7$(4),n.JRh(n.bMT(5,6,"quality-assurance.title")),n.R7$(2),n.Y8G("ngIf",!D.targetId),n.R7$(),n.Y8G("ngIf",D.targetId),n.R7$(4),n.JRh(n.bMT(12,8,"quality-assurance.topics")),n.R7$(2),n.Y8G("ngIf",n.bMT(14,10,D.isTopicsLoading())),n.R7$(2),n.Y8G("ngIf",!0!==n.bMT(16,12,D.isTopicsLoading())))},dependencies:[i.C,d.bT,N.v,Q.e,d.pM,T.Wk,d.Jj,m.h,m.D9,d.vh]})}}return h})(),W=(()=>{class h{static{this.\u0275fac=function($){return new($||h)}}static{this.\u0275cmp=n.VBU({type:h,selectors:[["ds-notification-qa-page"]],standalone:!0,features:[n.aNF],decls:1,vars:0,template:function($,D){1&$&&n.nrm(0,"ds-quality-assurance-topic")},dependencies:[V],encapsulation:2})}}return h})()}}]);