"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[2355],{62355:(V,M,s)=>{s.r(M),s.d(M,{SubscriptionsDataService:()=>S});var l=s(96697),a=s(96354),o=s(25558),K=s(5964),T=s(23294),v=s(91098),I=s(96526),U=s(72734),D=s(53954),p=s(41684),L=s(13617),A=s(63897),R=s(35108),W=s(12598),u=s(41023),B=s(43052),f=s(32473),C=s(4910),P=s(80183),c=s(82777),m=s(39806),E=s(67600),r=s(54438),g=s(21626),y=s(25499);let S=(()=>{class i extends A.W{constructor(_,e,n,t,d,$,h,O,j){super("subscriptions",t,d,h,O),this.comparator=_,this.http=e,this.notificationsService=n,this.requestService=t,this.rdbService=d,this.store=$,this.objectCache=h,this.halService=O,this.nameService=j,this.findByEpersonLinkPath="findByEPerson",this.searchData=new R.X(this.linkPath,t,d,h,O,this.responseMsToLive),this.deleteData=new L.I(this.linkPath,t,d,h,O,n,this.responseMsToLive,this.constructIdEndpoint)}getSubscriptionsByPersonDSO(_,e){const n=Object.assign(new u._,{searchParams:[new D.x("resource",e),new D.x("eperson_id",_)]});return this.searchData.searchBy("findByEPersonAndDso",n,!1,!0)}createSubscription(_,e,n){return this.halService.getEndpoint(this.linkPath).pipe((0,c.VT)(),(0,l.s)(1),(0,a.T)(t=>`${t}?resource=${n}&eperson_id=${e}`),(0,a.T)(t=>new B.QU(this.requestService.generateRequestId(),t,JSON.stringify(_))),(0,v.w$)(this.requestService),(0,o.n)(t=>this.rdbService.buildFromRequestUUID(t.uuid)),(0,P.qD)())}updateSubscription(_,e,n){return this.halService.getEndpoint(this.linkPath).pipe((0,c.VT)(),(0,l.s)(1),(0,a.T)(t=>`${t}/${_.id}?resource=${n}&eperson_id=${e}`),(0,a.T)(t=>new B.v_(this.requestService.generateRequestId(),t,JSON.stringify(_))),(0,v.w$)(this.requestService),(0,o.n)(t=>this.rdbService.buildFromRequestUUID(t.uuid)),(0,P.qD)())}deleteSubscription(_){return this.halService.getEndpoint(this.linkPath).pipe((0,K.p)(e=>(0,c.hj)(e)),(0,T.F)(),(0,o.n)(e=>this.deleteData.delete(_)),(0,P.qD)())}findAllSubscriptions(_){return this.findAllData.findAll(_,!0,!0,(0,E.s)("resource"),(0,E.s)("eperson"))}findByEPerson(_,e){const n=Object.assign(new u._,e,{searchParams:[new D.x("uuid",_)]});return this.getEndpoint().pipe((0,a.T)(t=>`${t}/search/${this.findByEpersonLinkPath}`),(0,o.n)(t=>this.findListByHref(t,n,!1,!0,(0,E.s)("resource"),(0,E.s)("eperson"))))}static{this.\u0275fac=function(e){return new(e||i)(r.KVO(W.j),r.KVO(g.Qq),r.KVO(m.I),r.KVO(f.B),r.KVO(U.o),r.KVO(y.il),r.KVO(p.$),r.KVO(C.Y),r.KVO(I.f))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);