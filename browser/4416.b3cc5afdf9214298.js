"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[4416],{64416:(Q,T,n)=>{n.r(T),n.d(T,{ROUTES:()=>H});var $=n(70379),m=n(41780),h=n(4856),f=n(80183),v=n(39806),S=n(26479),u=n(60177),t=n(54438),c=n(1473),D=n(88280),B=n(760),p=n(70334),I=n(82777),_=n(13143),b=n(7901);function M(r,d){if(1&r){const e=t.RV6();t.j41(0,"ds-form",1),t.bIt("submitForm",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSubmit())})("cancel",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onCancel())}),t.k0s()}if(2&r){const e=t.XpG();t.Y8G("formId","comcol-form-id")("formModel",e.formModel)}}let E=(()=>{class r{constructor(e){this.router=e,this.bitstreamFormat=new B.v,this.updatedFormat=new t.bkB,this.supportLevelOptions=[{label:p.c.Known,value:p.c.Known},{label:p.c.Unknown,value:p.c.Unknown},{label:p.c.Supported,value:p.c.Supported}],this.arrayElementLayout={grid:{group:"form-row"}},this.arrayInputElementLayout={grid:{host:"col"}},this.formModel=[new c.rA_({id:"shortDescription",name:"shortDescription",label:"admin.registries.bitstream-formats.edit.shortDescription.label",hint:"admin.registries.bitstream-formats.edit.shortDescription.hint",required:!0,validators:{required:null},errorMessages:{required:"Please enter a name for this bitstream format"}}),new c.rA_({id:"mimetype",name:"mimetype",label:"admin.registries.bitstream-formats.edit.mimetype.label",hint:"admin.registries.bitstream-formats.edit.mimetype.hint"}),new c.Zex({id:"description",name:"description",label:"admin.registries.bitstream-formats.edit.description.label",hint:"admin.registries.bitstream-formats.edit.description.hint",spellCheck:D.c.form.spellCheck}),new c.z4z({id:"supportLevel",name:"supportLevel",options:this.supportLevelOptions,label:"admin.registries.bitstream-formats.edit.supportLevel.label",hint:"admin.registries.bitstream-formats.edit.supportLevel.hint",value:this.supportLevelOptions[0].value}),new c.M7d({id:"internal",name:"internal",label:"Internal",hint:"admin.registries.bitstream-formats.edit.internal.hint"}),new c.UqU({id:"extensions",name:"extensions",label:"admin.registries.bitstream-formats.edit.extensions.label",groupFactory:()=>[new c.rA_({id:"extension",placeholder:"admin.registries.bitstream-formats.edit.extensions.placeholder"},this.arrayInputElementLayout)]},this.arrayElementLayout)]}ngOnInit(){this.initValues()}initValues(){this.formModel.forEach(e=>{if("extensions"===e.name){if((0,I.a4)(this.bitstreamFormat.extensions)){const a=this.bitstreamFormat.extensions,i=e;for(let s=0;s<a.length;s++)i.insertGroup(s).group[0]=new c.rA_({id:`extension-${s}`,value:a[s]},this.arrayInputElementLayout)}}else(0,I.a4)(this.bitstreamFormat[e.name])&&(e.value=this.bitstreamFormat[e.name])})}onSubmit(){const e=Object.assign(new B.v,{id:this.bitstreamFormat.id});this.formModel.forEach(a=>{if("extensions"===a.name){const i=a,s=[];for(let o=0;o<i.groups.length;o++){const l=i.get(o).get(0).value;(0,I.Im)(l)||s.push(i.get(o).get(0).value)}e.extensions=s}else e[a.name]=a.value}),this.updatedFormat.emit(e)}onCancel(){this.router.navigate([(0,S.J)()])}static{this.\u0275fac=function(a){return new(a||r)(t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-bitstream-format-form"]],inputs:{bitstreamFormat:"bitstreamFormat"},outputs:{updatedFormat:"updatedFormat"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"formId","formModel","submitForm","cancel",4,"ngIf"],[3,"submitForm","cancel","formId","formModel"]],template:function(a,i){1&a&&t.DNE(0,M,1,2,"ds-form",0),2&a&&t.Y8G("ngIf",i.formModel)},dependencies:[_.s,u.bT],encapsulation:2})}}return r})(),C=(()=>{class r{constructor(e,a,i,s){this.router=e,this.notificationService=a,this.translateService=i,this.bitstreamFormatDataService=s}createBitstreamFormat(e){this.bitstreamFormatDataService.createBitstreamFormat(e).pipe((0,f.qD)()).subscribe(a=>{a.hasSucceeded?(this.notificationService.success(this.translateService.get("admin.registries.bitstream-formats.create.success.head"),this.translateService.get("admin.registries.bitstream-formats.create.success.content")),this.router.navigate([(0,S.J)()]),this.bitstreamFormatDataService.clearBitStreamFormatRequests().subscribe()):this.notificationService.error(this.translateService.get("admin.registries.bitstream-formats.create.failure.head"),this.translateService.get("admin.registries.bitstream-formats.create.failure.content"))})}static{this.\u0275fac=function(a){return new(a||r)(t.rXU(b.Ix),t.rXU(v.I),t.rXU(m.c$),t.rXU(h.BitstreamFormatDataService))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-add-bitstream-format"]],standalone:!0,features:[t.aNF],decls:7,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-4"],["id","sub-header",1,"border-bottom","pb-2"],[3,"updatedFormat"]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"ds-bitstream-format-form",4),t.bIt("updatedFormat",function(o){return i.createBitstreamFormat(o)}),t.k0s()()()()),2&a&&(t.R7$(4),t.JRh(t.bMT(5,1,"admin.registries.bitstream-formats.create.new")))},dependencies:[E,m.h,m.D9],encapsulation:2})}}return r})();var k=n(96697),j=n(73028),y=n(96354),x=n(56594),G=n(25558),U=n(22978),X=n(5682),L=n(23401);const F=r=>["/admin/registries/bitstream-formats",r,"edit"];function A(r,d){1&r&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI("(",t.bMT(2,1,"admin.registries.bitstream-formats.table.internal"),")"))}function J(r,d){if(1&r){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"label",17)(3,"input",18),t.nI1(4,"async"),t.nI1(5,"translate"),t.bIt("change",function(i){const s=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.selectBitStreamFormat(s,i))}),t.k0s(),t.j41(6,"span",15),t.EFF(7),t.nI1(8,"translate"),t.k0s()()(),t.j41(9,"td")(10,"a",19),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"a",19),t.EFF(14),t.k0s()(),t.j41(15,"td")(16,"a",19),t.EFF(17),t.DNE(18,A,3,3,"span",20),t.k0s()(),t.j41(19,"td")(20,"a",19),t.EFF(21),t.nI1(22,"translate"),t.k0s()()()}if(2&r){let e;const a=d.$implicit,i=t.XpG(2);t.R7$(3),t.Y8G("checked",null==(e=t.bMT(4,12,i.selectedBitstreamFormatIDs$))?null:e.includes(a.id)),t.BMQ("aria-label",t.bMT(5,14,"admin.registries.bitstream-formats.select")),t.R7$(4),t.SpI("",t.bMT(8,16,"admin.registries.bitstream-formats.select"),"}"),t.R7$(3),t.Y8G("routerLink",t.eq3(20,F,a.id)),t.R7$(),t.JRh(a.id),t.R7$(2),t.Y8G("routerLink",t.eq3(22,F,a.id)),t.R7$(),t.JRh(a.shortDescription),t.R7$(2),t.Y8G("routerLink",t.eq3(24,F,a.id)),t.R7$(),t.SpI("",a.mimetype," "),t.R7$(),t.Y8G("ngIf",a.internal),t.R7$(2),t.Y8G("routerLink",t.eq3(26,F,a.id)),t.R7$(),t.JRh(t.bMT(22,18,"admin.registries.bitstream-formats.table.supportLevel."+a.supportLevel))}}function O(r,d){if(1&r&&(t.j41(0,"ds-pagination",11),t.nI1(1,"async"),t.j41(2,"div",12)(3,"table",13)(4,"thead")(5,"tr")(6,"th",14)(7,"span",15),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"th",14),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"th",14),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"th",14),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"th",14),t.EFF(20),t.nI1(21,"translate"),t.k0s()()(),t.j41(22,"tbody"),t.DNE(23,J,23,28,"tr",16),t.nI1(24,"async"),t.k0s()()()()),2&r){let e,a;const i=t.XpG();t.Y8G("paginationOptions",i.pageConfig)("collectionSize",null==(e=t.bMT(1,10,i.bitstreamFormats$))||null==e.payload?null:e.payload.totalElements)("hideGear",!1)("hidePagerWhenSinglePage",!0),t.R7$(8),t.JRh(t.bMT(9,12,"admin.registries.bitstream-formats.table.selected")),t.R7$(3),t.JRh(t.bMT(12,14,"admin.registries.bitstream-formats.table.id")),t.R7$(3),t.JRh(t.bMT(15,16,"admin.registries.bitstream-formats.table.name")),t.R7$(3),t.JRh(t.bMT(18,18,"admin.registries.bitstream-formats.table.mimetype")),t.R7$(3),t.JRh(t.bMT(21,20,"admin.registries.bitstream-formats.table.supportLevel.head")),t.R7$(3),t.Y8G("ngForOf",null==(a=t.bMT(24,22,i.bitstreamFormats$))||null==a.payload?null:a.payload.page)}}function N(r,d){1&r&&(t.j41(0,"div",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"admin.registries.bitstream-formats.no-items")," "))}function Y(r,d){if(1&r){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.deselectAll())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&r&&(t.R7$(),t.JRh(t.bMT(2,1,"admin.registries.bitstream-formats.table.deselect-all")))}function V(r,d){if(1&r){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.deleteFormats())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&r&&(t.R7$(),t.JRh(t.bMT(2,1,"admin.registries.bitstream-formats.table.delete")))}const z=r=>({format:r}),R=[],H=[{path:"",providers:R,component:(()=>{class r{constructor(e,a,i,s){this.notificationsService=e,this.translateService=a,this.bitstreamFormatService=i,this.paginationService=s,this.pageConfig=Object.assign(new L.W,{id:"rbp",pageSize:20,pageSizeOptions:[20,40,60,80,100]})}deleteFormats(){this.bitstreamFormatService.clearBitStreamFormatRequests(),this.bitstreamFormatService.getSelectedBitstreamFormats().pipe((0,k.s)(1),(0,j.Z)(e=>e),(0,j.Z)(e=>this.bitstreamFormatService.delete(e.id).pipe((0,f.qD)(),(0,y.T)(a=>a.hasSucceeded))),(0,x.$)()).subscribe(e=>{const a=e.filter(s=>s),i=e.filter(s=>!s);a.length>0&&this.showNotification(!0,a.length),i.length>0&&this.showNotification(!1,i.length),this.deselectAll(),this.paginationService.resetPage(this.pageConfig.id)})}deselectAll(){this.bitstreamFormatService.deselectAllBitstreamFormats()}selectedBitstreamFormatIDs(){return this.bitstreamFormatService.getSelectedBitstreamFormats().pipe((0,y.T)(e=>e.map(a=>a.id)))}selectBitStreamFormat(e,a){a.target.checked?this.bitstreamFormatService.selectBitstreamFormat(e):this.bitstreamFormatService.deselectBitstreamFormat(e)}showNotification(e,a){const i="admin.registries.bitstream-formats.delete",s=e?"success":"failure",o=this.translateService.instant(`${i}.${s}.head`),l=this.translateService.instant(`${i}.${s}.amount`,{amount:a});e?this.notificationsService.success(o,l):this.notificationsService.error(o,l)}ngOnInit(){this.bitstreamFormats$=this.paginationService.getFindListOptions(this.pageConfig.id,this.pageConfig).pipe((0,G.n)(e=>this.bitstreamFormatService.findAll(e))),this.selectedBitstreamFormatIDs$=this.selectedBitstreamFormatIDs()}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id)}static{this.\u0275fac=function(a){return new(a||r)(t.rXU(v.I),t.rXU(m.c$),t.rXU(h.BitstreamFormatDataService),t.rXU(U.m))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-bitstream-formats"]],standalone:!0,features:[t.aNF],decls:22,vars:22,consts:[[1,"container"],[1,"bitstream-formats","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description"],["id","create-new",1,"mb-2"],[1,"btn","btn-success",3,"routerLink"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],["class","btn btn-primary deselect",3,"click",4,"ngIf"],["type","submit","class","btn btn-danger float-right",3,"click",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","formats",1,"table","table-striped","table-hover"],["scope","col"],[1,"sr-only"],[4,"ngFor","ngForOf"],[1,"mb-0"],["type","checkbox",3,"change","checked"],[3,"routerLink"],[4,"ngIf"],["role","alert",1,"alert","alert-info"],[1,"btn","btn-primary","deselect",3,"click"],["type","submit",1,"btn","btn-danger","float-right",3,"click"]],template:function(a,i){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p",4),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"p",5)(10,"a",6),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.DNE(13,O,25,24,"ds-pagination",7),t.nI1(14,"async"),t.DNE(15,N,3,3,"div",8),t.nI1(16,"async"),t.j41(17,"div"),t.DNE(18,Y,3,3,"button",9),t.nI1(19,"async"),t.DNE(20,V,3,3,"button",10),t.nI1(21,"async"),t.k0s()()()()),2&a){let s,o,l,g;t.R7$(4),t.JRh(t.bMT(5,8,"admin.registries.bitstream-formats.head")),t.R7$(3),t.JRh(t.bMT(8,10,"admin.registries.bitstream-formats.description")),t.R7$(3),t.Y8G("routerLink","add"),t.R7$(),t.JRh(t.bMT(12,12,"admin.registries.bitstream-formats.create.new")),t.R7$(2),t.Y8G("ngIf",(null==(s=t.bMT(14,14,i.bitstreamFormats$))||null==s.payload?null:s.payload.totalElements)>0),t.R7$(2),t.Y8G("ngIf",0===(null==(o=t.bMT(16,16,i.bitstreamFormats$))||null==o.payload?null:o.payload.totalElements)),t.R7$(3),t.Y8G("ngIf",(null==(l=t.bMT(19,18,i.bitstreamFormats$))||null==l.payload||null==l.payload.page?null:l.payload.page.length)>0),t.R7$(2),t.Y8G("ngIf",(null==(g=t.bMT(21,20,i.bitstreamFormats$))||null==g.payload||null==g.payload.page?null:g.payload.page.length)>0)}},dependencies:[u.bT,u.Jj,b.Wk,m.h,m.D9,X.e,u.Sq],encapsulation:2})}}return r})()},{path:"add",resolve:{breadcrumb:$.S},providers:R,component:C,data:{breadcrumbKey:"admin.registries.bitstream-formats.create"}},{path:":id/edit",providers:R,component:(()=>{class r{constructor(e,a,i,s,o){this.route=e,this.router=a,this.notificationService=i,this.translateService=s,this.bitstreamFormatDataService=o}ngOnInit(){this.bitstreamFormatRD$=this.route.data.pipe((0,y.T)(e=>e.bitstreamFormat))}updateFormat(e){this.bitstreamFormatDataService.updateBitstreamFormat(e).pipe((0,f.qD)()).subscribe(a=>{a.hasSucceeded?(this.notificationService.success(this.translateService.get("admin.registries.bitstream-formats.edit.success.head"),this.translateService.get("admin.registries.bitstream-formats.edit.success.content")),this.router.navigate([(0,S.J)()])):this.notificationService.error("admin.registries.bitstream-formats.edit.failure.head","admin.registries.bitstream-formats.create.edit.content")})}static{this.\u0275fac=function(a){return new(a||r)(t.rXU(b.nX),t.rXU(b.Ix),t.rXU(v.I),t.rXU(m.c$),t.rXU(h.BitstreamFormatDataService))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["ds-edit-bitstream-format"]],standalone:!0,features:[t.aNF],decls:9,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-4"],["id","sub-header",1,"border-bottom","pb-2"],[3,"updatedFormat","bitstreamFormat"]],template:function(a,i){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"async"),t.nI1(6,"translate"),t.k0s(),t.j41(7,"ds-bitstream-format-form",4),t.nI1(8,"async"),t.bIt("updatedFormat",function(o){return i.updateFormat(o)}),t.k0s()()()()),2&a){let s,o;t.R7$(4),t.JRh(t.i5U(6,4,"admin.registries.bitstream-formats.edit.head",t.eq3(9,z,null==(s=t.bMT(5,2,i.bitstreamFormatRD$))?null:s.payload.shortDescription))),t.R7$(3),t.Y8G("bitstreamFormat",null==(o=t.bMT(8,7,i.bitstreamFormatRD$))?null:o.payload)}},dependencies:[E,m.h,m.D9,u.Jj],encapsulation:2})}}return r})(),resolve:{bitstreamFormat:(r,d,e=(0,t.WQX)(h.BitstreamFormatDataService))=>e.findById(r.params.id).pipe((0,f.qD)()),breadcrumb:$.S},data:{breadcrumbKey:"admin.registries.bitstream-formats.edit"}}]}}]);