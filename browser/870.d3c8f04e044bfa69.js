(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[870,9380],{69380:(K,S,n)=>{"use strict";n.r(S),n.d(S,{NotifyRequestsStatusDataService:()=>I});var u=n(96354),i=n(96697),g=n(72734),v=n(41684),M=n(4910),E=n(63897),$=n(43052),T=n(32473),F=n(54438);let I=(()=>{class s extends E.W{constructor(V,_,P,O){super("notifyrequests",V,_,P,O),this.requestService=V,this.rdbService=_,this.objectCache=P,this.halService=O}getNotifyRequestsStatus(V){const _=this.getEndpoint().pipe((0,u.T)(P=>P+"/"+V));return _.pipe((0,i.s)(1)).subscribe(P=>{const O=new $.IP(this.requestService.generateRequestId(),P);this.requestService.send(O,!0)}),this.rdbService.buildFromHref(_)}static{this.\u0275fac=function(_){return new(_||s)(F.KVO(T.B),F.KVO(g.o),F.KVO(v.$),F.KVO(M.Y))}}static{this.\u0275prov=F.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},15927:(K,S,n)=>{"use strict";n.d(S,{z:()=>$});var u=n(7673),i=n(99437),g=n(96354),v=n(82640),M=n(53778),E=n(54438);let $=(()=>{class T{constructor(I,s){this.appConfig=I,this.restService=s}getLinks(I){return this.restService.get(`${this.appConfig.rest.baseUrl}/signposting/links/${I}`).pipe((0,i.W)(A=>(0,u.of)([])),(0,g.T)(A=>200===A.statusCode?A.payload:[]))}static{this.\u0275fac=function(s){return new(s||T)(E.KVO(v.vQ),E.KVO(M.Y))}}static{this.\u0275prov=E.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},97042:(K,S,n)=>{"use strict";n.r(S),n.d(S,{ItemAlertsComponent:()=>G});var u=n(60177),i=n(7901),g=n(41780),v=n(96354),M=n(84572),E=n(80183),$=n(65007),T=n(3970),I=(n(88318),n(75447)),s=n(16292),A=n(47978),V=n(71306),_=n(54438);function P(R,d){if(1&R&&(_.j41(0,"div",2),_.nrm(1,"ds-alert",3),_.nI1(2,"translate"),_.k0s()),2&R){const e=_.XpG();_.R7$(),_.Y8G("type",e.AlertTypeEnum.Warning)("content",_.bMT(2,2,"item.alerts.private"))}}function O(R,d){if(1&R){const e=_.RV6();_.j41(0,"a",11),_.bIt("click",function(){_.eBV(e);const f=_.XpG(2);return _.Njj(f.openReinstateModal())}),_.EFF(1),_.nI1(2,"translate"),_.k0s()}2&R&&(_.R7$(),_.JRh(_.bMT(2,1,"item.alerts.reinstate-request")))}function X(R,d){if(1&R&&(_.j41(0,"div",4)(1,"ds-alert",5)(2,"div",6)(3,"span",7),_.EFF(4),_.nI1(5,"translate"),_.k0s(),_.j41(6,"div",8)(7,"a",9),_.EFF(8),_.nI1(9,"translate"),_.k0s(),_.DNE(10,O,3,3,"a",10),_.nI1(11,"async"),_.k0s()()()()),2&R){const e=_.XpG();_.R7$(),_.Y8G("type",e.AlertTypeEnum.Warning),_.R7$(3),_.JRh(_.bMT(5,4,"item.alerts.withdrawn")),_.R7$(4),_.JRh(_.bMT(9,6,"404.link.home-page")),_.R7$(2),_.Y8G("ngIf",_.bMT(11,8,e.showReinstateButton$))}}let G=(()=>{class R{constructor(e,l,f){this.authService=e,this.dsoWithdrawnReinstateModalService=l,this.correctionTypeDataService=f,this.AlertTypeEnum=A.v}ngOnChanges(e){e.item?.currentValue.withdrawn&&this.showReinstateButton$&&(this.showReinstateButton$=this.shouldShowReinstateButton())}shouldShowReinstateButton(){const e=this.correctionTypeDataService.findByItem(this.item.uuid,!0).pipe((0,E.qD)(),(0,v.T)(f=>f.hasSucceeded?f.payload.page:[])),l=this.authService.isAuthorized(T._.AdministratorOf);return(0,M.z)([l,e]).pipe((0,v.T)(([f,W])=>!f&&W.some(z=>z.topic===V.el)))}openReinstateModal(){this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(this.item,"request-reinstate",this.item.isArchived)}static{this.\u0275fac=function(l){return new(l||R)(_.rXU($.AuthorizationDataService),_.rXU(V.Ee),_.rXU(I.CorrectionTypeDataService))}}static{this.\u0275cmp=_.VBU({type:R,selectors:[["ds-base-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_.OA$,_.aNF],decls:3,vars:2,consts:[["class","private-warning",4,"ngIf"],["class","withdrawn-warning",4,"ngIf"],[1,"private-warning"],[3,"type","content"],[1,"withdrawn-warning"],[3,"type"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"align-self-center"],[1,"gap-2","d-flex"],["routerLink","/home",1,"btn","btn-primary","btn-sm"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(l,f){1&l&&(_.j41(0,"div"),_.DNE(1,P,3,4,"div",0)(2,X,12,10,"div",1),_.k0s()),2&l&&(_.R7$(),_.Y8G("ngIf",f.item&&!f.item.isDiscoverable),_.R7$(),_.Y8G("ngIf",f.item&&f.item.isWithdrawn))},dependencies:[s.C,u.bT,g.h,g.D9,i.Wk,u.Jj]})}}return R})()},9130:(K,S,n)=>{"use strict";n.d(S,{R:()=>$}),n(88318);var i=n(8886),v=(n(97042),n(54438));const M=["*"];function E(T,F){}let $=(()=>{class T extends i.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"ItemAlertsComponent"}importThemedComponent(I){return n(42176)(`./${I}/app/item-page/alerts/item-alerts.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(n,97042))}static{this.\u0275fac=(()=>{let I;return function(A){return(I||(I=v.xGo(T)))(A||T)}})()}static{this.\u0275cmp=v.VBU({type:T,selectors:[["ds-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[v.Vt3,v.aNF],ngContentSelectors:M,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(s,A){1&s&&(v.NAR(),v.DNE(0,E,0,0,"ng-template",null,0,v.C5r),v.j41(2,"div",null,1),v.SdG(4),v.k0s())},encapsulation:2})}}return T})()},14826:(K,S,n)=>{"use strict";n.r(S),n.d(S,{FullFileSectionComponent:()=>Q});var u=n(60177),i=n(41780),g=n(25558),v=n(88141),M=n(82640),E=n(96526),$=n(42578),T=n(22978),I=(n(88318),n(82777)),s=n(28836),A=n(79222),V=n(39806),_=n(5682),P=n(23401),O=n(43525),X=n(67600),G=n(18226),R=n(97402),d=n(1231),e=n(54438);function l(y,Y){if(1&y&&(e.qex(0),e.j41(1,"dt",12),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"dd",13),e.EFF(5),e.k0s(),e.bVm()),2&y){const h=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"item.page.filesection.description")),e.R7$(3),e.JRh(h.firstMetadataValue("dc.description"))}}function f(y,Y){if(1&y&&(e.j41(0,"div",7)(1,"div",8),e.nrm(2,"ds-thumbnail",9),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",10)(5,"dl",11)(6,"dt",12),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"dd",13),e.EFF(10),e.k0s(),e.j41(11,"dt",12),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"dd",13),e.EFF(15),e.nI1(16,"dsFileSize"),e.k0s(),e.j41(17,"dt",12),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"dd",13),e.EFF(21),e.nI1(22,"async"),e.k0s(),e.DNE(23,l,6,4,"ng-container",2),e.k0s()(),e.j41(24,"div",14)(25,"ds-file-download-link",15),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()),2&y){let h,B;const b=Y.$implicit,H=e.XpG(4);e.R7$(2),e.Y8G("thumbnail",null==(h=e.bMT(3,11,b.thumbnail))?null:h.payload),e.R7$(5),e.JRh(e.bMT(8,13,"item.page.filesection.name")),e.R7$(3),e.JRh(H.dsoNameService.getName(b)),e.R7$(2),e.JRh(e.bMT(13,15,"item.page.filesection.size")),e.R7$(3),e.JRh(e.bMT(16,17,b.sizeBytes)),e.R7$(3),e.JRh(e.bMT(19,19,"item.page.filesection.format")),e.R7$(3),e.JRh(null==(B=e.bMT(22,21,b.format))||null==B.payload?null:B.payload.description),e.R7$(2),e.Y8G("ngIf",b.hasMetadata("dc.description")),e.R7$(2),e.Y8G("bitstream",b)("item",H.item),e.R7$(),e.SpI(" ",e.bMT(27,23,"item.page.filesection.download")," ")}}function W(y,Y){if(1&y&&(e.j41(0,"ds-pagination",5),e.DNE(1,f,28,25,"div",6),e.k0s()),2&y){const h=e.XpG(2).ngVar,B=e.XpG();e.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",B.originalOptions)("collectionSize",null==h?null:h.totalElements)("retainScrollPosition",!0),e.R7$(),e.Y8G("ngForOf",null==h?null:h.page)}}function z(y,Y){if(1&y&&(e.j41(0,"div")(1,"h3",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,W,2,6,"ds-pagination",4),e.k0s()),2&y){const h=e.XpG().ngVar;e.R7$(2),e.JRh(e.bMT(3,2,"item.page.filesection.original.bundle")),e.R7$(2),e.Y8G("ngIf",(null==h||null==h.page?null:h.page.length)>0)}}function tt(y,Y){if(1&y&&(e.j41(0,"div"),e.DNE(1,z,5,4,"div",2),e.k0s()),2&y){const h=Y.ngVar,B=e.XpG();e.R7$(),e.Y8G("ngIf",B.hasValuesInBundle(h))}}function t(y,Y){if(1&y&&(e.j41(0,"div",17)(1,"div",8),e.nrm(2,"ds-thumbnail",9),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",10)(5,"dl",11)(6,"dt",12),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"dd",13),e.EFF(10),e.k0s(),e.j41(11,"dt",12),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"dd",13),e.EFF(15),e.nI1(16,"dsFileSize"),e.k0s(),e.j41(17,"dt",12),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"dd",13),e.EFF(21),e.nI1(22,"async"),e.k0s(),e.j41(23,"dt",12),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"dd",13),e.EFF(27),e.k0s()()(),e.j41(28,"div",14)(29,"ds-file-download-link",15),e.EFF(30),e.nI1(31,"translate"),e.k0s()()()),2&y){let h,B;const b=Y.$implicit,H=e.XpG(4);e.R7$(2),e.Y8G("thumbnail",null==(h=e.bMT(3,12,b.thumbnail))?null:h.payload),e.R7$(5),e.JRh(e.bMT(8,14,"item.page.filesection.name")),e.R7$(3),e.JRh(H.dsoNameService.getName(b)),e.R7$(2),e.JRh(e.bMT(13,16,"item.page.filesection.size")),e.R7$(3),e.JRh(e.bMT(16,18,b.sizeBytes)),e.R7$(3),e.JRh(e.bMT(19,20,"item.page.filesection.format")),e.R7$(3),e.JRh(null==(B=e.bMT(22,22,b.format))||null==B.payload?null:B.payload.description),e.R7$(3),e.JRh(e.bMT(25,24,"item.page.filesection.description")),e.R7$(3),e.JRh(b.firstMetadataValue("dc.description")),e.R7$(2),e.Y8G("bitstream",b)("item",H.item),e.R7$(),e.SpI(" ",e.bMT(31,26,"item.page.filesection.download")," ")}}function nt(y,Y){if(1&y&&(e.j41(0,"ds-pagination",5),e.DNE(1,t,32,28,"div",16),e.k0s()),2&y){const h=e.XpG(2).ngVar,B=e.XpG();e.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",B.licenseOptions)("collectionSize",null==h?null:h.totalElements)("retainScrollPosition",!0),e.R7$(),e.Y8G("ngForOf",null==h?null:h.page)}}function k(y,Y){if(1&y&&(e.j41(0,"div")(1,"h3",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,nt,2,6,"ds-pagination",4),e.k0s()),2&y){const h=e.XpG().ngVar;e.R7$(2),e.JRh(e.bMT(3,2,"item.page.filesection.license.bundle")),e.R7$(2),e.Y8G("ngIf",(null==h||null==h.page?null:h.page.length)>0)}}function it(y,Y){if(1&y&&(e.j41(0,"div"),e.DNE(1,k,5,4,"div",2),e.k0s()),2&y){const h=Y.ngVar,B=e.XpG();e.R7$(),e.Y8G("ngIf",B.hasValuesInBundle(h))}}let Q=(()=>{class y extends d.FileSectionComponent{constructor(h,B,b,H,Z,p){super(h,B,b,Z,p),this.notificationsService=B,this.translateService=b,this.paginationService=H,this.dsoNameService=Z,this.appConfig=p,this.originalOptions=Object.assign(new P.W,{id:"obo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize}),this.licenseOptions=Object.assign(new P.W,{id:"lbo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe((0,g.n)(h=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:h.pageSize,currentPage:h.currentPage},!0,!0,(0,X.s)("format"),(0,X.s)("thumbnail"))),(0,v.M)(h=>{(0,I.a4)(h.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${h.statusCode} ${h.errorMessage}`)})),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe((0,g.n)(h=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:h.pageSize,currentPage:h.currentPage},!0,!0,(0,X.s)("format"),(0,X.s)("thumbnail"))),(0,v.M)(h=>{(0,I.a4)(h.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${h.statusCode} ${h.errorMessage}`)}))}hasValuesInBundle(h){return(0,I.a4)(h)&&!(0,I.Im)(h.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}static{this.\u0275fac=function(B){return new(B||y)(e.rXU($.BitstreamDataService),e.rXU(V.I),e.rXU(i.c$),e.rXU(T.m),e.rXU(E.f),e.rXU(M.vQ))}}static{this.\u0275cmp=e.VBU({type:y,selectors:[["ds-base-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:9,consts:[[3,"label"],[4,"ngVar"],[4,"ngIf"],[1,"h5","simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],["class","file-section row mb-3",4,"ngFor","ngForOf"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],[3,"bitstream","item"],["class","file-section row",4,"ngFor","ngForOf"],[1,"file-section","row"]],template:function(B,b){if(1&B&&(e.j41(0,"ds-metadata-field-wrapper",0),e.nI1(1,"translate"),e.DNE(2,tt,2,1,"div",1),e.nI1(3,"async"),e.DNE(4,it,2,1,"div",1),e.nI1(5,"async"),e.k0s()),2&B){let H,Z;e.Y8G("label",e.bMT(1,3,b.label)),e.R7$(2),e.Y8G("ngVar",null==(H=e.bMT(3,5,b.originals$))?null:H.payload),e.R7$(2),e.Y8G("ngVar",null==(Z=e.bMT(5,7,b.licenses$))?null:Z.payload)}},dependencies:[_.e,u.bT,i.h,i.D9,u.Jj,G.r,R.T,u.Sq,s.z,O.s,A.Q],styles:["@media screen and (min-width: 768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})}}return y})()},53996:(K,S,n)=>{"use strict";n.d(S,{n:()=>$}),n(88318);var i=n(8886),v=(n(14826),n(54438));const M=["*"];function E(T,F){}let $=(()=>{class T extends i.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FullFileSectionComponent"}importThemedComponent(I){return n(63614)(`./${I}/app/item-page/full/field-components/file-section/full-file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(n,14826))}static{this.\u0275fac=(()=>{let I;return function(A){return(I||(I=v.xGo(T)))(A||T)}})()}static{this.\u0275cmp=v.VBU({type:T,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[v.Vt3,v.aNF],ngContentSelectors:M,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(s,A){1&s&&(v.NAR(),v.DNE(0,E,0,0,"ng-template",null,0,v.C5r),v.j41(2,"div",null,1),v.SdG(4),v.k0s())},encapsulation:2})}}return T})()},33242:(K,S,n)=>{"use strict";n.r(S),n.d(S,{FullItemPageComponent:()=>Z});var u=n(60177),i=n(54438),g=n(7901),v=n(41780),M=n(96354),E=n(5964),$=n(42084),T=n(65007),F=n(29326),I=n(15927),s=n(7337),A=n(50332),V=n(17807),_=n(82777),P=n(79632),O=n(82394),X=n(18226),G=n(57850),R=n(9130),d=n(44616),e=n(26077),l=n(91459),f=n(72976),W=n(80502),z=n(53996),tt=n(8865);const t=p=>[p];function nt(p,j){if(1&p&&(i.j41(0,"div",18)(1,"a",19),i.nI1(2,"async"),i.EFF(3),i.nI1(4,"translate"),i.k0s()()),2&p){const r=i.XpG(5);i.R7$(),i.Y8G("routerLink",i.eq3(6,t,i.bMT(2,2,r.itemPageRoute$))),i.R7$(2),i.SpI(" ",i.bMT(4,4,"item.page.link.simple")," ")}}function k(p,j){if(1&p&&(i.j41(0,"tr")(1,"td"),i.EFF(2),i.k0s(),i.j41(3,"td"),i.EFF(4),i.k0s(),i.j41(5,"td"),i.EFF(6),i.k0s()()),2&p){const r=j.$implicit,C=i.XpG().$implicit;i.R7$(2),i.JRh(C.key),i.R7$(2),i.JRh(r.value),i.R7$(2),i.JRh(r.language)}}function it(p,j){if(1&p&&(i.qex(0),i.DNE(1,k,7,3,"tr",15),i.bVm()),2&p){const r=j.$implicit;i.R7$(),i.Y8G("ngForOf",r.value)}}function Q(p,j){if(1&p){const r=i.RV6();i.j41(0,"div",20)(1,"div",21)(2,"button",22),i.bIt("click",function(){i.eBV(r);const L=i.XpG(5);return i.Njj(L.back())}),i.nrm(3,"i",23),i.EFF(4),i.nI1(5,"translate"),i.k0s()()()}2&p&&(i.R7$(4),i.SpI(" ",i.bMT(5,1,"item.page.return"),""))}function y(p,j){if(1&p&&(i.j41(0,"div",9)(1,"div",10),i.nrm(2,"ds-item-page-title-field",11)(3,"ds-dso-edit-menu"),i.k0s(),i.DNE(4,nt,5,8,"div",12),i.j41(5,"div",13)(6,"table",14)(7,"tbody"),i.DNE(8,it,2,1,"ng-container",15),i.nI1(9,"async"),i.nI1(10,"keyvalue"),i.k0s()()(),i.nrm(11,"ds-item-page-full-file-section",6)(12,"ds-item-page-collections",6)(13,"ds-item-versions",16),i.DNE(14,Q,6,3,"div",17),i.k0s()),2&p){const r=i.XpG().ngIf,C=i.XpG(3);i.R7$(2),i.Y8G("item",r),i.R7$(2),i.Y8G("ngIf",!C.fromSubmissionObject),i.R7$(4),i.Y8G("ngForOf",i.bMT(10,9,i.bMT(9,7,C.metadata$))),i.R7$(3),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("ngIf",C.fromSubmissionObject)}}function Y(p,j){if(1&p&&(i.j41(0,"div"),i.nrm(1,"ds-item-alerts",6)(2,"ds-item-versions-notice",6)(3,"ds-view-tracker",7),i.DNE(4,y,15,11,"div",8),i.nI1(5,"async"),i.k0s()),2&p){const r=j.ngIf,C=i.XpG(3);i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("object",r),i.R7$(),i.Y8G("ngIf",!r.isWithdrawn||i.bMT(5,4,C.isAdmin$))}}function h(p,j){if(1&p&&(i.j41(0,"div",4),i.DNE(1,Y,6,6,"div",5),i.k0s()),2&p){const r=i.XpG().ngVar;i.Y8G("@fadeInOut",void 0),i.R7$(),i.Y8G("ngIf",null==r?null:r.payload)}}function B(p,j){1&p&&(i.nrm(0,"ds-error",24),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"error.item"))}function b(p,j){1&p&&(i.nrm(0,"ds-loading",24),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"loading.item"))}function H(p,j){if(1&p&&(i.j41(0,"div",1),i.DNE(1,h,2,2,"div",2)(2,B,2,3,"ds-error",3)(3,b,2,3,"ds-loading",3),i.k0s()),2&p){const r=j.ngVar;i.R7$(),i.Y8G("ngIf",null==r?null:r.hasSucceeded),i.R7$(),i.Y8G("ngIf",null==r?null:r.hasFailed),i.R7$(),i.Y8G("ngIf",null==r?null:r.isLoading)}}let Z=(()=>{class p extends l.ItemPageComponent{constructor(r,C,L,J,N,q,at,rt,lt,ct){super(r,C,L,J,q,at,rt,lt,ct),this.route=r,this.router=C,this.items=L,this.authorizationService=J,this._location=N,this.responseService=q,this.signpostingDataService=at,this.linkHeadService=rt,this.notifyInfoService=lt,this.platformId=ct,this.fromSubmissionObject=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe((0,M.T)(r=>r.payload),(0,E.p)(r=>(0,_.a4)(r)),(0,M.T)(r=>r.metadata)),this.subs.push(this.route.data.subscribe(r=>{this.fromSubmissionObject=(0,_.a4)(r.wfi)||(0,_.a4)(r.wsi)}))}back(){this._location.back()}ngOnDestroy(){this.subs.filter(r=>(0,_.a4)(r)).forEach(r=>r.unsubscribe())}static{this.\u0275fac=function(C){return new(C||p)(i.rXU(g.nX),i.rXU(g.Ix),i.rXU(F.ItemDataService),i.rXU(T.AuthorizationDataService),i.rXU(u.aZ),i.rXU(s.w),i.rXU(I.z),i.rXU(tt.m),i.rXU($.P),i.rXU(i.Agw))}}static{this.\u0275cmp=i.VBU({type:p,selectors:[["ds-base-full-item-page"]],standalone:!0,features:[i.Vt3,i.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],["class","full-item-info",4,"ngIf"],[1,"full-item-info"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],["class","simple-view-link my-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"mt-2",3,"item"],["class","button-row bottom",4,"ngIf"],[1,"simple-view-link","my-3"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"button-row","bottom"],[1,"text-right"],[1,"btn","btn-outline-secondary","mr-1",3,"click"],[1,"fas","fa-arrow-left"],[3,"message"]],template:function(C,L){1&C&&(i.DNE(0,H,4,3,"div",0),i.nI1(1,"async")),2&C&&i.Y8G("ngVar",i.bMT(1,1,L.itemRD$))},dependencies:[P.A,O.v,v.h,v.D9,z.n,d.r,f.I,u.bT,u.Sq,u.Jj,u.lG,g.Wk,e.V,V.T,W.s,G.H,R.R,X.r],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[A.Ws]},changeDetection:0})}}return p})()},10870:(K,S,n)=>{"use strict";n.d(S,{i:()=>E});var u=n(8886),g=(n(33242),n(54438));const v=["*"];function M($,T){}let E=(()=>{class $ extends u.J{getComponentName(){return"FullItemPageComponent"}importThemedComponent(F){return n(4872)(`./${F}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(n,33242))}static{this.\u0275fac=(()=>{let F;return function(s){return(F||(F=g.xGo($)))(s||$)}})()}static{this.\u0275cmp=g.VBU({type:$,selectors:[["ds-full-item-page"]],standalone:!0,features:[g.Vt3,g.aNF],ngContentSelectors:v,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(I,s){1&I&&(g.NAR(),g.DNE(0,M,0,0,"ng-template",null,0,g.C5r),g.j41(2,"div",null,1),g.SdG(4),g.k0s())},encapsulation:2})}}return $})()},91459:(K,S,n)=>{"use strict";n.r(S),n.d(S,{ItemPageComponent:()=>Z});var u=n(60177),i=n(54438),g=n(41780),v=n(84572),M=n(7673),E=n(96354),$=n(96697),T=n(25558),F=n(42084),I=n(65007),s=n(3970),A=n(29326),V=n(15927),_=n(7337),P=n(80183),O=n(78448),X=n(50332),G=n(82777),R=n(79632),d=n(82394),e=n(17191),l=n(18226),f=n(57850),W=n(9130),z=n(90887),tt=n(72976),t=n(80502),nt=n(98488),k=n(79068),it=n(7901),Q=n(8865);function y(p,j){if(1&p&&i.nrm(0,"ds-listable-object-component-loader",11),2&p){const r=i.XpG().ngIf,C=i.XpG(3);i.Y8G("object",r)("viewMode",C.viewMode)}}function Y(p,j){if(1&p&&(i.j41(0,"div"),i.nrm(1,"ds-item-alerts",6)(2,"ds-qa-event-notification",6)(3,"ds-notify-requests-status",7)(4,"ds-item-versions-notice",6)(5,"ds-view-tracker",8),i.DNE(6,y,1,2,"ds-listable-object-component-loader",9),i.nI1(7,"async"),i.nrm(8,"ds-item-versions",10),i.k0s()),2&p){const r=j.ngIf,C=i.XpG(3);i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("itemUuid",r.uuid),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("object",r),i.R7$(),i.Y8G("ngIf",!r.isWithdrawn||i.bMT(7,8,C.isAdmin$)),i.R7$(2),i.Y8G("item",r)("displayActions",!1)}}function h(p,j){if(1&p&&(i.j41(0,"div",4),i.DNE(1,Y,9,10,"div",5),i.k0s()),2&p){const r=i.XpG().ngVar;i.Y8G("@fadeInOut",void 0),i.R7$(),i.Y8G("ngIf",null==r?null:r.payload)}}function B(p,j){1&p&&(i.nrm(0,"ds-error",12),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"error.item"))}function b(p,j){1&p&&(i.nrm(0,"ds-loading",12),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"loading.item"))}function H(p,j){if(1&p&&(i.j41(0,"div",1),i.DNE(1,h,2,2,"div",2)(2,B,2,3,"ds-error",3)(3,b,2,3,"ds-loading",3),i.k0s()),2&p){const r=j.ngVar;i.R7$(),i.Y8G("ngIf",null==r?null:r.hasSucceeded),i.R7$(),i.Y8G("ngIf",null==r?null:r.hasFailed),i.R7$(),i.Y8G("ngIf",null==r?null:r.isLoading)}}let Z=(()=>{class p{constructor(r,C,L,J,N,q,at,rt,lt){this.route=r,this.router=C,this.items=L,this.authorizationService=J,this.responseService=N,this.signpostingDataService=q,this.linkHeadService=at,this.notifyInfoService=rt,this.platformId=lt,this.viewMode=O.n.StandalonePage,this.signpostingLinks=[],this.inboxTags=[],this.coarRestApiUrls=[],this.initPageLinks()}ngOnInit(){this.itemRD$=this.route.data.pipe((0,E.T)(r=>r.dso)),this.itemPageRoute$=this.itemRD$.pipe((0,P.Hz)(),(0,E.T)(r=>(0,z._o)(r))),this.isAdmin$=this.authorizationService.isAuthorized(s._.AdministratorOf)}initPageLinks(){this.route.params.subscribe(r=>{(0,v.z)([this.signpostingDataService.getLinks(r.id).pipe((0,$.s)(1)),this.getCoarLdnLocalInboxUrls()]).subscribe(([C,L])=>{let J="";if(this.signpostingLinks=C,C.forEach(N=>{J=J+((0,G.hj)(J)?", ":"")+`<${N.href}> ; rel="${N.rel}"`+((0,G.hj)(N.type)?` ; type="${N.type}" `:" ");let q={href:N.href,rel:N.rel};(0,G.hj)(N.type)&&(q=Object.assign(q,{type:N.type})),this.linkHeadService.addTag(q)}),L.length>0){const N=this.initPageInboxLinks(L);J=J+((0,G.hj)(J)?", ":"")+N}(0,u.Vy)(this.platformId)&&this.responseService.setHeader("Link",J)})})}getCoarLdnLocalInboxUrls(){return this.notifyInfoService.isCoarConfigEnabled().pipe((0,T.n)(r=>r?this.notifyInfoService.getCoarLdnLocalInboxUrls():(0,M.of)([])))}initPageInboxLinks(r){const C=this.notifyInfoService.getInboxRelationLink();let L="";return r.forEach(J=>{const N={href:J,rel:C};this.inboxTags.push(N),this.linkHeadService.addTag(N),L=L+((0,G.hj)(L)?", ":"")+`<${J}> ; rel="${C}"`}),L}ngOnDestroy(){this.signpostingLinks.forEach(r=>{this.linkHeadService.removeTag(`href='${r.href}'`)}),this.inboxTags.forEach(r=>{this.linkHeadService.removeTag(`href='${r.href}'`)})}static{this.\u0275fac=function(C){return new(C||p)(i.rXU(it.nX),i.rXU(it.Ix),i.rXU(A.ItemDataService),i.rXU(I.AuthorizationDataService),i.rXU(_.w),i.rXU(V.z),i.rXU(Q.m),i.rXU(F.P),i.rXU(i.Agw))}}static{this.\u0275cmp=i.VBU({type:p,selectors:[["ds-base-item-page"]],standalone:!0,features:[i.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"itemUuid"],[3,"object"],[3,"object","viewMode",4,"ngIf"],[1,"mt-2",3,"item","displayActions"],[3,"object","viewMode"],[3,"message"]],template:function(C,L){1&C&&(i.DNE(0,H,4,3,"div",0),i.nI1(1,"async")),2&C&&i.Y8G("ngVar",i.bMT(1,1,L.itemRD$))},dependencies:[l.r,W.R,t.s,f.H,e.v,tt.I,R.A,d.v,g.h,g.D9,u.Jj,u.bT,nt.x,k.f],styles:["@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}"],data:{animation:[X.Ws]},changeDetection:0})}}return p})()},98488:(K,S,n)=>{"use strict";n.d(S,{x:()=>R});var u=n(60177),i=n(5964),g=n(96354),v=n(69380),M=n(80183),E=n(82777),$=n(41780),T=n(21308),F=n(44869),I=function(d){return d.ACCEPTED="ACCEPTED",d.REJECTED="REJECTED",d.REQUESTED="REQUESTED",d}(I||{}),s=n(54438);const A=d=>({"align-items-center":d}),V=(d,e,l)=>({serviceName:d,serviceUrl:e,offerType:l});function _(d,e){if(1&d&&(s.qex(0),s.nrm(1,"div",7),s.nI1(2,"translate"),s.bVm()),2&d){const l=e.$implicit,f=s.XpG(2);s.R7$(),s.Y8G("innerHTML",s.i5U(2,1,f.displayOptions.text,s.sMw(4,V,l.serviceName,l.serviceUrl,l.offerType)),s.npT)}}function P(d,e){if(1&d&&(s.qex(0),s.j41(1,"div",1),s.nrm(2,"img",2),s.j41(3,"ds-truncatable",3)(4,"ds-truncatable-part",4)(5,"div",5),s.DNE(6,_,3,8,"ng-container",6),s.k0s()()()(),s.bVm()),2&d){const l=s.XpG();s.R7$(),s.ZvI("alert d-flex flex-row sections-gap ",l.displayOptions.alertType,""),s.Y8G("ngClass",s.eq3(8,A,1===l.data.length)),s.R7$(2),s.Y8G("id",l.status),s.R7$(),s.Y8G("id",l.status)("minLines",1),s.R7$(2),s.Y8G("ngForOf",l.data)}}let O=(()=>{class d{constructor(){this.data=[]}ngOnInit(){this.prepareDataToDisplay()}prepareDataToDisplay(){switch(this.status){case I.ACCEPTED:this.displayOptions={alertType:"alert-info",text:"request-status-alert-box.accepted"};break;case I.REJECTED:this.displayOptions={alertType:"alert-danger",text:"request-status-alert-box.rejected"};break;case I.REQUESTED:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.requested"}}}static{this.\u0275fac=function(f){return new(f||d)}}static{this.\u0275cmp=s.VBU({type:d,selectors:[["ds-request-status-alert-box"]],inputs:{status:"status",data:"data"},standalone:!0,features:[s.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],["src","assets/images/qa-coar-notify-logo.png","alt","notify logo",1,"source-logo"],[3,"id"],[3,"id","minLines"],[1,"w-100","d-flex","flex-column"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(f,W){1&f&&s.DNE(0,P,7,10,"ng-container",0),2&f&&s.Y8G("ngIf",(null==W.data?null:W.data.length)>0&&W.displayOptions)},dependencies:[u.bT,F.W,T.d,u.Sq,$.h,$.D9,u.YU],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}}return d})();function X(d,e){if(1&d&&(s.qex(0),s.nrm(1,"ds-request-status-alert-box",2),s.bVm()),2&d){const l=e.$implicit;s.R7$(),s.Y8G("status",l.key)("data",l.value)}}function G(d,e){if(1&d&&(s.qex(0),s.DNE(1,X,2,2,"ng-container",1),s.nI1(2,"async"),s.nI1(3,"keyvalue"),s.bVm()),2&d){const l=s.XpG();s.R7$(),s.Y8G("ngForOf",s.bMT(3,3,s.bMT(2,1,l.requestMap$)))}}let R=(()=>{class d{constructor(l){this.notifyInfoService=l}ngOnInit(){this.requestMap$=this.notifyInfoService.getNotifyRequestsStatus(this.itemUuid).pipe((0,M.qD)(),(0,i.p)(l=>(0,E.a4)(l)),(0,M.Bo)(),(0,i.p)(l=>(0,E.a4)(l)),(0,g.T)(l=>this.groupDataByStatus(l)))}groupDataByStatus(l){const f=new Map;return l.notifyStatus?.forEach(W=>{const z=W.status;f.has(z)||f.set(z,[]),f.get(z)?.push(W)}),f}static{this.\u0275fac=function(f){return new(f||d)(s.rXU(v.NotifyRequestsStatusDataService))}}static{this.\u0275cmp=s.VBU({type:d,selectors:[["ds-notify-requests-status"]],inputs:{itemUuid:"itemUuid"},standalone:!0,features:[s.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"status","data"]],template:function(f,W){if(1&f&&(s.DNE(0,G,4,5,"ng-container",0),s.nI1(1,"async")),2&f){let z;s.Y8G("ngIf",(null==(z=s.bMT(1,1,W.requestMap$))?null:z.size)>0)}},dependencies:[O,u.Jj,u.lG,u.Sq,u.bT],changeDetection:0})}}return d})()},79068:(K,S,n)=>{"use strict";n.d(S,{f:()=>R});var u=n(60177),i=n(7901),g=n(41780),v=n(96354),M=n(99437),E=n(47483),$=n(53954),T=n(61723),I=(n(88318),n(80183)),s=n(54438);let A=(()=>{class d{transform(l,f){return l.split(f)}static{this.\u0275fac=function(f){return new(f||d)}}static{this.\u0275pipe=s.EJ8({name:"dsSplit",type:d,pure:!0,standalone:!0})}}return d})();const V=d=>({num:d}),_=(d,e,l)=>[d,e,"target",l],P=()=>({forward:!0});function O(d,e){if(1&d&&(s.j41(0,"div",3)(1,"div",4),s.nrm(2,"img",5),s.nI1(3,"dsSplit"),s.k0s(),s.j41(4,"div",6)(5,"div",7),s.EFF(6),s.nI1(7,"translate"),s.k0s(),s.j41(8,"button",8),s.nI1(9,"dsSplit"),s.EFF(10),s.nI1(11,"translate"),s.k0s()()()),2&d){const l=s.XpG().$implicit,f=s.XpG(2);s.R7$(2),s.Mz_("src","assets/images/qa-",s.i5U(3,8,l.id,":")[0],"-logo.png",s.B4B),s.Mz_("alt","",l.id," logo"),s.R7$(4),s.SpI(" ",s.i5U(7,11,"item.qa-event-notification.check.notification-info",s.eq3(19,V,l.totalEvents))," "),s.R7$(2),s.Y8G("routerLink",s.sMw(21,_,f.getQualityAssuranceRoute(),s.i5U(9,14,l.id,":")[0],f.item.id))("queryParams",s.lJ4(25,P)),s.R7$(2),s.SpI(" ",s.bMT(11,17,"item.qa-event-notification-info.check.button")," ")}}function X(d,e){if(1&d&&(s.qex(0),s.DNE(1,O,12,26,"div",2),s.bVm()),2&d){const l=e.$implicit;s.R7$(),s.Y8G("ngIf",l.totalEvents>0)}}function G(d,e){if(1&d&&(s.qex(0),s.DNE(1,X,2,1,"ng-container",1),s.bVm()),2&d){const l=e.ngIf;s.R7$(),s.Y8G("ngForOf",l)}}let R=(()=>{class d{constructor(l){this.qualityAssuranceSourceDataService=l}ngOnChanges(l){l.item&&l.item.currentValue.uuid!==l.item.previousValue?.uuid&&(this.sources$=this.getQualityAssuranceSources$())}getQualityAssuranceSources$(){const l={searchParams:[new $.x("target",this.item.uuid)]};return this.qualityAssuranceSourceDataService.getSourcesByTarget(l,!1).pipe((0,I.qD)(),(0,v.T)(f=>f.hasSucceeded?f.payload.page:[]),(0,M.W)(()=>[]))}getQualityAssuranceRoute(){return(0,E.b7)()}static{this.\u0275fac=function(f){return new(f||d)(s.rXU(T.QualityAssuranceSourceDataService))}}static{this.\u0275cmp=s.VBU({type:d,selectors:[["ds-qa-event-notification"]],inputs:{item:"item"},standalone:!0,features:[s.Jv_([T.QualityAssuranceSourceDataService]),s.OA$,s.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","alert alert-info d-flex flex-row",4,"ngIf"],[1,"alert","alert-info","d-flex","flex-row"],[1,"source-logo-container"],["onerror","this.src='assets/images/dspace-logo.svg'",1,"source-logo",3,"src","alt"],[1,"w-100","d-flex","justify-content-between"],[1,"pl-4","align-self-center"],[1,"btn","btn-primary","align-self-center",3,"routerLink","queryParams"]],template:function(f,W){1&f&&(s.DNE(0,G,2,1,"ng-container",0),s.nI1(1,"async")),2&f&&s.Y8G("ngIf",s.bMT(1,1,W.sources$))},dependencies:[u.bT,u.Sq,u.Jj,i.Wk,g.h,g.D9,A],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.source-logo-container[_ngcontent-%COMP%]{width:var(--ds-qa-logo-width);display:flex;justify-content:center}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}}return d})()},72976:(K,S,n)=>{"use strict";n.d(S,{I:()=>$t});var u=n(60177),i=n(89417),g=n(41780),v=n(84572),M=n(25558),E=n(96354),$=n(99172),T=n(96697),F=n(8917),I=n(65007),s=n(3970),A=n(81783),V=n(93860),_=n(22978),O=(n(88318),n(80183)),X=n(16292),G=n(47978),R=n(60456),d=n(82777),e=n(39806),l=n(5682),f=n(23401),W=n(33550),z=n(67600),tt=n(90887),t=n(54438),nt=n(7901),k=n(7673),it=n(70274),Q=n(73028),y=n(88141),Y=n(29326),B=(n(2035),n(52837)),b=n(24261),H=n(52149);const Z=a=>({version:a});let p=(()=>{class a{constructor(o){this.activeModal=o,this.response=new t.bkB}onModalClose(){this.response.emit(!1),this.activeModal.dismiss()}onModalSubmit(){this.response.emit(!0),this.activeModal.close()}static{this.\u0275fac=function(m){return new(m||a)(t.rXU(H.Lw))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["ds-item-versions-delete-modal"]],outputs:{response:"response"},standalone:!0,features:[t.aNF],decls:22,vars:21,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pb-2"],[1,"modal-footer"],[1,"btn","btn-outline-secondary","btn-sm","cancel",3,"click","title"],[1,"fas","fa-times","fa-fw"],[1,"btn","btn-danger","btn-sm","confirm",3,"click","title"],[1,"fas","fa-check","fa-fw"]],template:function(m,c){1&m&&(t.j41(0,"div")(1,"div",0),t.EFF(2),t.nI1(3,"translate"),t.j41(4,"button",1),t.bIt("click",function(){return c.onModalClose()}),t.j41(5,"span",2),t.EFF(6,"\xd7"),t.k0s()()(),t.j41(7,"div",3)(8,"p",4),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.j41(11,"div",5)(12,"button",6),t.nI1(13,"translate"),t.bIt("click",function(){return c.onModalClose()}),t.nrm(14,"i",7),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"button",8),t.nI1(18,"translate"),t.bIt("click",function(){return c.onModalSubmit()}),t.nrm(19,"i",9),t.EFF(20),t.nI1(21,"translate"),t.k0s()()()),2&m&&(t.R7$(2),t.SpI("",t.bMT(3,6,"item.version.delete.modal.header")," "),t.R7$(7),t.JRh(t.i5U(10,8,"item.version.delete.modal.text",t.eq3(19,Z,c.versionNumber))),t.R7$(3),t.FS9("title",t.bMT(13,11,"item.version.delete.modal.button.cancel.tooltip")),t.R7$(3),t.SpI(" ",t.bMT(16,13,"item.version.delete.modal.button.cancel")," "),t.R7$(2),t.FS9("title",t.bMT(18,15,"item.version.delete.modal.button.confirm.tooltip")),t.R7$(3),t.SpI(" ",t.bMT(21,17,"item.version.delete.modal.button.confirm")," "))},dependencies:[g.h,g.D9]})}}return a})();var j=n(76604),r=n(13574);function C(a,U){1&a&&t.nrm(0,"span")}function L(a,U){if(1&a&&(t.j41(0,"a",9),t.EFF(1),t.k0s()),2&a){const o=t.XpG();t.Y8G("routerLink",o.getVersionRoute(o.version.id)),t.R7$(),t.JRh(o.version.version)}}function J(a,U){if(1&a&&t.EFF(0),2&a){const o=t.XpG();t.SpI(" ",o.version.version," ")}}function N(a,U){1&a&&(t.j41(0,"span"),t.EFF(1,"*"),t.k0s())}function q(a,U){1&a&&(t.j41(0,"span",10),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"item.version.history.table.workspaceItem")," "))}function at(a,U){1&a&&(t.j41(0,"span",11),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"item.version.history.table.workflowItem")," "))}function rt(a,U){if(1&a){const o=t.RV6();t.j41(0,"button",14),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const c=t.XpG(2);return t.Njj(c.editWorkspaceItem(c.workspaceId$))}),t.nrm(2,"i",15),t.k0s()}2&a&&t.FS9("title",t.bMT(1,1,"item.version.history.table.action.editWorkspaceItem"))}function lt(a,U){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"button",16),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const c=t.XpG(2);return t.Njj(c.createNewVersion(c.version))}),t.nrm(3,"i",17),t.k0s(),t.bVm()}if(2&a){const o=t.XpG(2);t.R7$(),t.FS9("title",t.bMT(2,2,o.createVersionTitle)),t.Y8G("dsBtnDisabled",o.isAnyBeingEdited()||o.hasDraftVersion)}}function ct(a,U){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"button",18),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const c=t.XpG(2);return t.Njj(c.deleteVersion(c.version,c.version.id===c.itemVersion.id))}),t.nrm(3,"i",19),t.k0s(),t.bVm()}if(2&a){const o=t.XpG(2);t.R7$(),t.FS9("title",t.bMT(2,3,"item.version.history.table.action.deleteVersion")),t.Y8G("ngClass",o.isAnyBeingEdited()?"btn-outline-primary":"btn-outline-danger")("dsBtnDisabled",o.isAnyBeingEdited())}}function mt(a,U){if(1&a&&(t.j41(0,"div",12),t.DNE(1,rt,3,3,"button",13),t.nI1(2,"async"),t.DNE(3,lt,4,4,"ng-container",4),t.nI1(4,"async"),t.DNE(5,ct,4,5,"ng-container",4),t.nI1(6,"async"),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.Y8G("ngIf",t.bMT(2,3,o.workspaceId$)),t.R7$(2),t.Y8G("ngIf",t.bMT(4,5,o.canCreateVersion$)),t.R7$(2),t.Y8G("ngIf",t.bMT(6,7,o.canDeleteVersion$))}}let pt=(()=>{class a{constructor(o,m,c,D,x,w,ot,_t,et,st,dt){this.workspaceItemDataService=o,this.workflowItemDataService=m,this.router=c,this.itemService=D,this.authorizationService=x,this.itemVersionShared=w,this.versionHistoryService=ot,this.versionService=_t,this.notificationsService=et,this.translateService=st,this.modalService=dt,this.versionsHistoryChange=new t.bkB}ngOnInit(){this.workspaceId$=this.getWorkspaceId(this.version.item),this.workflowId$=this.getWorkflowId(this.version.item),this.canDeleteVersion$=this.canDeleteVersion(this.version),this.canCreateVersion$=this.authorizationService.isAuthorized(s._.CanCreateVersion,this.item.self),this.createVersionTitle=this.hasDraftVersion?"item.version.history.table.action.hasDraft":"item.version.history.table.action.newVersion"}getWorkspaceId(o){return this.hasDraftVersion?o.pipe((0,O.ak)(),(0,E.T)(m=>m.uuid),(0,M.n)(m=>this.workspaceItemDataService.findByItem(m,!0)),(0,O.qD)(),(0,E.T)(m=>m?.payload?.id)):(0,k.of)(void 0)}getWorkflowId(o){return this.getWorkspaceId(o).pipe((0,it.H)(m=>m?(0,k.of)(void 0):o.pipe((0,O.ak)(),(0,E.T)(c=>c.uuid),(0,M.n)(c=>this.workflowItemDataService.findByItem(c,!0)),(0,O.qD)(),(0,E.T)(c=>c?.payload?.id))))}editWorkspaceItem(o){o.subscribe(m=>{this.router.navigateByUrl("workspaceitems/"+m+"/edit")})}canDeleteVersion(o){return this.authorizationService.isAuthorized(s._.CanDeleteVersion,o.self)}getVersionRoute(o){return(0,tt.vf)(o)}createNewVersion(o){const m=o.version,c=this.modalService.open(r.L);c.componentInstance.versionNumber=m,c.componentInstance.createVersionEvent.pipe((0,Q.Z)(D=>(0,v.z)([(0,k.of)(D),o.item.pipe((0,O.ak)())])),(0,Q.Z)(([D,x])=>this.versionHistoryService.createVersion(x._links.self.href,D)),(0,O.qD)(),(0,y.M)(()=>c.close()),(0,y.M)(D=>{if(this.itemVersionShared.notifyCreateNewVersion(D),D.hasSucceeded){const x=this.versionService.getHistoryFromVersion(o).pipe((0,y.M)(w=>{this.itemService.invalidateItemCache(this.item.uuid),this.versionHistoryService.invalidateVersionHistoryCache(w.id)}));this.versionsHistoryChange.emit(x)}}),(0,O.ak)(),(0,M.n)(D=>this.itemService.findByHref(D._links.item.href)),(0,O.ak)(),(0,M.n)(D=>this.workspaceItemDataService.findByItem(D.uuid,!0,!1)),(0,O.ak)()).subscribe(D=>{this.router.navigateByUrl("workspaceitems/"+D.id+"/edit")})}deleteVersion(o,m){const x=o.version,w=o.item,ot=this.modalService.open(p);ot.componentInstance.versionNumber=o.version,ot.componentInstance.firstVersion=!1,ot.componentInstance.response.pipe((0,T.s)(1)).subscribe(_t=>{_t&&w.pipe((0,O.ak)(),(0,Q.Z)(et=>(0,v.z)([(0,k.of)(et),this.versionHistoryService.getVersionHistoryFromVersion$(o)])),(0,Q.Z)(([et,st])=>(0,v.z)([this.deleteItemAndGetResult$(et),(0,k.of)(st)])),(0,Q.Z)(([et,st])=>(0,v.z)([(0,k.of)(et),this.versionHistoryService.getLatestVersionItemFromHistory$(st).pipe((0,y.M)(()=>{this.versionsHistoryChange.emit((0,k.of)(st))}))]))).subscribe(([et,st])=>{if(et?this.notificationsService.success(null,this.translateService.get("item.version.delete.notification.success",{version:x})):this.notificationsService.error(null,this.translateService.get("item.version.delete.notification.failure",{version:x})),m){const dt=(0,tt.nF)(st);this.router.navigateByUrl(dt)}})})}deleteItemAndGetResult$(o){return this.itemService.delete(o.id).pipe((0,O.qD)(),(0,E.T)(m=>m.hasSucceeded),(0,T.s)(1))}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}static{this.\u0275fac=function(m){return new(m||a)(t.rXU(b.WorkspaceitemDataService),t.rXU(B.WorkflowItemDataService),t.rXU(nt.Ix),t.rXU(Y.ItemDataService),t.rXU(I.AuthorizationDataService),t.rXU(j.h),t.rXU(V.VersionHistoryDataService),t.rXU(A.VersionDataService),t.rXU(e.I),t.rXU(g.c$),t.rXU(H.Bq))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["ds-item-versions-row-element-version"]],inputs:{hasDraftVersion:"hasDraftVersion",version:"version",itemVersion:"itemVersion",item:"item",displayActions:"displayActions",versionBeingEditedNumber:"versionBeingEditedNumber"},outputs:{versionsHistoryChange:"versionsHistoryChange"},standalone:!0,features:[t.aNF],decls:15,vars:15,consts:[["versionNumberWithLink",""],["versionNumberWithoutLink",""],[1,"left-column"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf"],["class","text-light badge badge-primary ml-3",4,"ngIf"],["class","text-light badge badge-info ml-3",4,"ngIf"],[1,"right-column"],["class","btn-group edit-field space-children-mr",4,"ngIf"],[3,"routerLink"],[1,"text-light","badge","badge-primary","ml-3"],[1,"text-light","badge","badge-info","ml-3"],[1,"btn-group","edit-field","space-children-mr"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","title"],[1,"fas","fa-pencil-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"click","dsBtnDisabled","title"],[1,"fas","fa-code-branch","fa-fw"],[1,"btn","btn-sm","version-row-element-delete",3,"click","ngClass","dsBtnDisabled","title"],[1,"fas","fa-trash","fa-fw"]],template:function(m,c){if(1&m&&(t.j41(0,"div",2),t.DNE(1,C,1,0,"span",3),t.nI1(2,"async"),t.nI1(3,"async"),t.DNE(4,L,2,2,"ng-template",null,0,t.C5r)(6,J,1,1,"ng-template",null,1,t.C5r)(8,N,2,0,"span",4)(9,q,3,3,"span",5),t.nI1(10,"async"),t.DNE(11,at,3,3,"span",6),t.nI1(12,"async"),t.k0s(),t.j41(13,"div",7),t.DNE(14,mt,7,9,"div",8),t.k0s()),2&m){const D=t.sdS(5),x=t.sdS(7);t.R7$(),t.Y8G("ngIf",t.bMT(2,7,c.workspaceId$)||t.bMT(3,9,c.workflowId$))("ngIfThen",x)("ngIfElse",D),t.R7$(7),t.Y8G("ngIf",(null==c.version?null:c.version.id)===(null==c.itemVersion?null:c.itemVersion.id)),t.R7$(),t.Y8G("ngIf",t.bMT(10,11,c.workspaceId$)),t.R7$(2),t.Y8G("ngIf",t.bMT(12,13,c.workflowId$)),t.R7$(3),t.Y8G("ngIf",c.displayActions)}},dependencies:[u.Jj,nt.Wk,g.h,g.D9,u.YU,u.bT,R.A],styles:[".left-column[_ngcontent-%COMP%]{float:left;text-align:left}.right-column[_ngcontent-%COMP%]{float:right;text-align:right}"]})}}return a})();const vt=a=>({version:a});function ut(a,U){1&a&&(t.j41(0,"h2",10),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"item.version.history.head")))}function gt(a,U){1&a&&(t.j41(0,"th",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"item.version.history.table.editor")))}function ft(a,U){if(1&a&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&a){const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",o.version.submitterName," ")}}function ht(a,U){1&a&&t.eu8(0)}function Et(a,U){if(1&a&&t.EFF(0),2&a){const o=t.XpG().$implicit;t.JRh(o.version.summary)}}function It(a,U){if(1&a){const o=t.RV6();t.j41(0,"input",26),t.nI1(1,"translate"),t.mxI("ngModelChange",function(c){t.eBV(o);const D=t.XpG(5);return t.DH7(D.versionBeingEditedSummary,c)||(D.versionBeingEditedSummary=c),t.Njj(c)}),t.bIt("keyup.enter",function(){t.eBV(o);const c=t.XpG(5);return t.Njj(c.onSummarySubmit())}),t.k0s()}if(2&a){const o=t.XpG(5);t.R50("ngModel",o.versionBeingEditedSummary),t.BMQ("aria-label",t.bMT(1,2,"item.version.history.table.action.editSummary"))}}function Dt(a,U){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"button",29),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const c=t.XpG(6);return t.Njj(c.disableVersionEditing())}),t.nrm(3,"i",30),t.k0s(),t.j41(4,"button",31),t.nI1(5,"translate"),t.bIt("click",function(){t.eBV(o);const c=t.XpG(6);return t.Njj(c.onSummarySubmit())}),t.nrm(6,"i",32),t.k0s(),t.bVm()}2&a&&(t.R7$(),t.FS9("title",t.bMT(2,2,"item.version.history.table.action.discardSummary")),t.R7$(3),t.FS9("title",t.bMT(5,4,"item.version.history.table.action.saveSummary")))}function Mt(a,U){if(1&a){const o=t.RV6();t.j41(0,"button",33),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const c=t.XpG(2).$implicit,D=t.XpG(4);return t.Njj(D.enableVersionEditing(c.version))}),t.nrm(2,"i",34),t.k0s()}if(2&a){const o=t.XpG(6);t.FS9("title",t.bMT(1,2,"item.version.history.table.action.editSummary")),t.Y8G("dsBtnDisabled",o.isAnyBeingEdited())}}function Tt(a,U){if(1&a&&(t.j41(0,"div",27),t.DNE(1,Dt,7,6,"ng-container",28)(2,Mt,3,4,"ng-template",null,3,t.C5r),t.k0s()),2&a){const o=t.sdS(3),m=t.XpG().$implicit,c=t.XpG(4);t.R7$(),t.Y8G("ngIf",c.isThisBeingEdited(m.version))("ngIfElse",o)}}function Ot(a,U){if(1&a){const o=t.RV6();t.j41(0,"tr",16)(1,"td",17)(2,"ds-item-versions-row-element-version",18),t.nI1(3,"async"),t.bIt("versionsHistoryChange",function(c){t.eBV(o);const D=t.XpG(4);return t.Njj(D.getAllVersions(c))}),t.k0s()(),t.DNE(4,ft,2,1,"td",19),t.nI1(5,"async"),t.j41(6,"td",20),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"td",21)(10,"div",22),t.DNE(11,ht,1,0,"ng-container",23)(12,Et,1,1,"ng-template",null,1,t.C5r)(14,It,2,4,"ng-template",null,2,t.C5r),t.k0s(),t.DNE(16,Tt,4,2,"div",24),t.nI1(17,"async"),t.k0s()()}if(2&a){const o=U.$implicit,m=t.sdS(13),c=t.sdS(15),D=t.XpG(2).ngIf,x=t.XpG(2);t.Y8G("id","version-row-"+o.version.id),t.R7$(2),t.Y8G("hasDraftVersion",t.bMT(3,13,x.hasDraftVersion$))("version",o.version)("item",x.item)("displayActions",x.displayActions)("itemVersion",D)("versionBeingEditedNumber",x.versionBeingEditedNumber),t.R7$(2),t.Y8G("ngIf",t.bMT(5,15,x.showSubmitter$)),t.R7$(3),t.SpI(" ",t.i5U(8,17,o.version.created,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.Y8G("ngIf",x.isThisBeingEdited(o.version))("ngIfThen",c)("ngIfElse",m),t.R7$(5),t.Y8G("ngIf",t.bMT(17,20,x.displayActions&&o.canEditVersion))}}function yt(a,U){if(1&a){const o=t.RV6();t.j41(0,"ds-pagination",11),t.bIt("paginationChange",function(){t.eBV(o);const c=t.XpG(3);return t.Njj(c.onPageChange())}),t.j41(1,"table",12)(2,"thead")(3,"tr")(4,"th",13),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.DNE(7,gt,3,3,"th",14),t.nI1(8,"async"),t.j41(9,"th",13),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th",13),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,Ot,18,22,"tr",15),t.k0s()(),t.j41(17,"div"),t.EFF(18),t.nI1(19,"translate"),t.k0s()()}if(2&a){const o=t.XpG(2).ngIf,m=t.XpG();t.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",m.options)("collectionSize",o.totalElements)("retainScrollPosition",!0),t.R7$(5),t.JRh(t.bMT(6,11,"item.version.history.table.version")),t.R7$(2),t.Y8G("ngIf",t.bMT(8,13,m.showSubmitter$)),t.R7$(3),t.JRh(t.bMT(11,15,"item.version.history.table.date")),t.R7$(3),t.JRh(t.bMT(14,17,"item.version.history.table.summary")),t.R7$(3),t.Y8G("ngForOf",o.versionDTOs),t.R7$(2),t.SpI("*\xa0",t.bMT(19,19,"item.version.history.selected"),"")}}function Pt(a,U){if(1&a&&(t.j41(0,"div"),t.DNE(1,ut,3,3,"h2",7),t.j41(2,"ds-alert",8),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.DNE(5,yt,20,21,"ds-pagination",9),t.k0s()),2&a){const o=U.ngIf,m=t.XpG().ngIf,c=t.XpG();t.R7$(),t.Y8G("ngIf",c.displayTitle),t.R7$(),t.Y8G("type",c.AlertTypeEnum.Info),t.R7$(),t.SpI(" ",t.i5U(4,4,"item.version.history.selected.alert",t.eq3(7,vt,o.version))," "),t.R7$(2),t.Y8G("ngIf",m.versionDTOs.length>0)}}function Rt(a,U){if(1&a&&(t.j41(0,"div",5),t.DNE(1,Pt,6,9,"div",6),t.nI1(2,"async"),t.k0s()),2&a){let o;const m=t.XpG();t.R7$(),t.Y8G("ngIf",null==(o=t.bMT(2,1,m.versionRD$))?null:o.payload)}}function Ct(a,U){if(1&a&&t.nrm(0,"ds-alert",36),2&a){const o=t.XpG(2);t.Y8G("content","item.version.history.empty")("type",o.AlertTypeEnum.Info)}}function St(a,U){if(1&a&&t.DNE(0,Ct,1,2,"ds-alert",35),2&a){const o=t.XpG();t.Y8G("ngIf",o.displayWhenEmpty)}}let $t=(()=>{class a{constructor(o,m,c,D,x,w,ot){this.versionHistoryService=o,this.versionService=m,this.paginationService=c,this.notificationsService=D,this.translateService=x,this.authorizationService=w,this.configurationService=ot,this.displayWhenEmpty=!1,this.displayTitle=!0,this.subs=[],this.AlertTypeEnum=G.v,this.showSubmitter$=this.showSubmitter(),this.pageSize=10,this.options=Object.assign(new f.W,{id:"ivo",currentPage:1,pageSize:this.pageSize})}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}isThisBeingEdited(o){return o?.version===this.versionBeingEditedNumber}enableVersionEditing(o){this.versionBeingEditedSummary=o?.summary,this.versionBeingEditedNumber=o?.version,this.versionBeingEditedId=o?.id}disableVersionEditing(){this.versionBeingEditedSummary=void 0,this.versionBeingEditedNumber=void 0,this.versionBeingEditedId=void 0}onSummarySubmit(){this.versionService.findById(this.versionBeingEditedId).pipe((0,O.yd)(),(0,M.n)(c=>{const w=Object.assign({},c.payload,{summary:this.versionBeingEditedSummary});return this.versionService.update(w).pipe((0,O.qD)())})).subscribe(c=>{c.hasSucceeded?(this.notificationsService.success(null,this.translateService.get("item.version.edit.notification.success",{version:this.versionBeingEditedNumber})),this.getAllVersions(this.versionHistory$)):this.notificationsService.warning(null,this.translateService.get("item.version.edit.notification.failure",{version:this.versionBeingEditedNumber})),this.disableVersionEditing()})}canEditVersion$(o){return this.authorizationService.isAuthorized(s._.CanEditVersion,o.self)}showSubmitter(){const o=this.configurationService.findByPropertyName("versioning.item.history.include.submitter").pipe((0,O.ak)(),(0,E.T)(c=>c.values[0]),(0,$.Z)(!1)),m=(0,v.z)([this.authorizationService.isAuthorized(s._.IsCollectionAdmin),this.authorizationService.isAuthorized(s._.IsCommunityAdmin),this.authorizationService.isAuthorized(s._.AdministratorOf)]).pipe((0,E.T)(([c,D,x])=>c||D||x),(0,T.s)(1));return(0,v.z)([o,m]).pipe((0,E.T)(([c,D])=>c&&D))}getAllVersions(o){const m=this.paginationService.getCurrentPagination(this.options.id,this.options);this.versionsDTO$=(0,v.z)([o,m]).pipe((0,M.n)(([c,D])=>this.versionHistoryService.getVersions(c.id,new W.C({pagination:Object.assign({},D,{currentPage:D.currentPage})}),!1,!0,(0,z.s)("item"),(0,z.s)("eperson"))),(0,O.qD)(),(0,O.Bo)(),(0,E.T)(c=>({totalElements:c.totalElements,versionDTOs:(c?.page??[]).map(D=>({version:D,canEditVersion:this.canEditVersion$(D)}))})))}onPageChange(){this.getAllVersions(this.versionHistory$)}ngOnInit(){(0,d.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,O.v7)(),(0,O.Bo)(),(0,d.Az)(),(0,M.n)(o=>o.versionhistory)),this.versionHistory$=this.versionHistoryRD$.pipe((0,O.ak)(),(0,d.Az)()),this.hasDraftVersion$=this.versionHistoryRD$.pipe((0,O.ak)(),(0,E.T)(o=>!!o?.draftVersion)),this.getAllVersions(this.versionHistory$),this.hasEpersons$=this.versionsDTO$.pipe((0,E.T)(o=>o.versionDTOs.filter(m=>void 0!==m.version.eperson).length>0),(0,$.Z)(!1)),this.itemPageRoutes$=this.versionsDTO$.pipe((0,M.n)(o=>(0,v.z)(o.versionDTOs.map(m=>m.version.item.pipe((0,O.Hz)())))),(0,E.T)(o=>{const m={};return o.forEach(c=>m[c.uuid]=(0,tt._o)(c)),m})))}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.options.id)}cleanupSubscribes(){this.subs.filter(o=>(0,d.a4)(o)).forEach(o=>o.unsubscribe())}static{this.\u0275fac=function(m){return new(m||a)(t.rXU(V.VersionHistoryDataService),t.rXU(A.VersionDataService),t.rXU(_.m),t.rXU(e.I),t.rXU(g.c$),t.rXU(I.AuthorizationDataService),t.rXU(F.ConfigurationDataService))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["ds-item-versions"]],inputs:{item:"item",displayWhenEmpty:"displayWhenEmpty",displayTitle:"displayTitle",displayActions:"displayActions"},standalone:!0,features:[t.aNF],decls:4,vars:4,consts:[["noItemVersion",""],["showSummary",""],["editSummary",""],["notThisBeingEdited",""],["class","mb-2",4,"ngIf","ngIfElse"],[1,"mb-2"],[4,"ngIf"],["class","h4",4,"ngIf"],[3,"type"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition","paginationChange",4,"ngIf"],[1,"h4"],[3,"paginationChange","hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"table","table-striped","table-bordered","align-middle","my-2"],["scope","col"],["scope","col",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"version-row-element-version"],[3,"versionsHistoryChange","hasDraftVersion","version","item","displayActions","itemVersion","versionBeingEditedNumber"],["class","version-row-element-editor",4,"ngIf"],[1,"version-row-element-date"],[1,"version-row-element-summary"],[1,"float-left"],[4,"ngIf","ngIfThen","ngIfElse"],["class","float-right btn-group edit-field space-children-mr",4,"ngIf"],[1,"version-row-element-editor"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"float-right","btn-group","edit-field","space-children-mr"],[4,"ngIf","ngIfElse"],[1,"btn","btn-sm","btn-outline-warning",3,"click","title"],[1,"fas","fa-undo-alt","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","dsBtnDisabled","title"],[1,"fas","fa-edit","fa-fw"],[3,"content","type",4,"ngIf"],[3,"content","type"]],template:function(m,c){if(1&m&&(t.DNE(0,Rt,3,3,"div",4),t.nI1(1,"async"),t.DNE(2,St,1,1,"ng-template",null,0,t.C5r)),2&m){const D=t.sdS(3);t.Y8G("ngIf",t.bMT(1,2,c.versionsDTO$))("ngIfElse",D)}},dependencies:[u.bT,X.C,l.e,u.pM,i.YN,i.me,i.BC,i.vS,u.Jj,u.vh,g.h,g.D9,pt,R.A]})}}return a})()},80502:(K,S,n)=>{"use strict";n.d(S,{s:()=>G});var u=n(60177),i=n(41780),g=n(983),v=n(7673),M=n(25558),E=n(96354),$=n(99172),T=n(93860),I=(n(88318),n(80183)),s=n(16292),A=n(47978),V=n(82777),_=n(90887),P=n(54438);const O=R=>({destination:R});function X(R,d){if(1&R&&(P.nrm(0,"ds-alert",1),P.nI1(1,"async"),P.nI1(2,"async"),P.nI1(3,"translate")),2&R){let e;const l=P.XpG();P.Y8G("content",P.i5U(3,7,"item.version.notice",P.eq3(10,O,l.getItemPage(null==(e=P.bMT(2,5,null==(e=P.bMT(1,3,l.latestVersion$))?null:e.item))?null:e.payload))))("dismissible",!1)("type",l.AlertTypeEnum.Warning)}}let G=(()=>{class R{constructor(e){this.versionHistoryService=e,this.AlertTypeEnum=A.v}ngOnInit(){(0,V.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,I.v7)(),(0,I.Bo)(),(0,V.Az)(),(0,M.n)(e=>e.versionhistory)),this.latestVersion$=this.versionHistoryRD$.pipe((0,I.qD)(),(0,M.n)(e=>e.hasSucceeded?this.versionHistoryService.getLatestVersionFromHistory$(e.payload):g.w)),this.showLatestVersionNotice$=this.versionRD$.pipe((0,I.qD)(),(0,M.n)(e=>e.hasSucceeded?this.versionHistoryService.isLatest$(e.payload).pipe((0,E.T)(l=>null!=l&&!l)):(0,v.of)(!1)),(0,$.Z)(!1)))}getItemPage(e){if((0,V.a4)(e))return(0,_._o)(e)}static{this.\u0275fac=function(l){return new(l||R)(P.rXU(T.VersionHistoryDataService))}}static{this.\u0275cmp=P.VBU({type:R,selectors:[["ds-item-versions-notice"]],inputs:{item:"item"},standalone:!0,features:[P.aNF],decls:2,vars:3,consts:[[3,"content","dismissible","type",4,"ngIf"],[3,"content","dismissible","type"]],template:function(l,f){1&l&&(P.DNE(0,X,4,12,"ds-alert",0),P.nI1(1,"async")),2&l&&P.Y8G("ngIf",!0===P.bMT(1,1,f.showLatestVersionNotice$))},dependencies:[u.bT,s.C,u.Jj,i.h,i.D9],encapsulation:2})}}return R})()},42176:(K,S,n)=>{var u={"./custom/app/item-page/alerts/item-alerts.component":[5215,5215]};function i(g){if(!n.o(u,g))return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+g+"'");throw E.code="MODULE_NOT_FOUND",E});var v=u[g],M=v[0];return n.e(v[1]).then(()=>n(M))}i.keys=()=>Object.keys(u),i.id=42176,K.exports=i},63614:(K,S,n)=>{var u={"./custom/app/item-page/full/field-components/file-section/full-file-section.component":[42991,2991]};function i(g){if(!n.o(u,g))return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+g+"'");throw E.code="MODULE_NOT_FOUND",E});var v=u[g],M=v[0];return n.e(v[1]).then(()=>n(M))}i.keys=()=>Object.keys(u),i.id=63614,K.exports=i},4872:(K,S,n)=>{var u={"./custom/app/item-page/full/full-item-page.component":[39325,9325]};function i(g){if(!n.o(u,g))return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+g+"'");throw E.code="MODULE_NOT_FOUND",E});var v=u[g],M=v[0];return n.e(v[1]).then(()=>n(M))}i.keys=()=>Object.keys(u),i.id=4872,K.exports=i}}]);